var error={fullTray:'<a href="javascript:errorpop.hide()" class="closePop"><span>close</span></a><h3>You may compare up to three items at a time.</h3><p>Would you like to continue with the first three items you\'ve selected?</p><a href="javascript:errorpop.hide()">No thanks</a> | <a href="javascript:frmCompareLink();fnSearchCompare(\'cat13504\')">Yes, continue to compare</a>',emptyTray:'<a href="javascript:errorpop.hide()" class="closePop"><span>close</span></a><h3>Please select at least two items to compare.</h3><a href="javascript:errorpop.hide()">Ok</a>',misc:"There has been an error"};$(document).ready(function(){$("input.compareCB").compareCB();$(".compareTray li").compareItem();$("a.availability").availBubbles();$("a.closeBubble").closeBubbles();$("div.magItem").doMag();$("div.proseriesItem").doProSeries();if(strCat.indexOf("abcat030")!=-1&&typeof fskus=="object"){$.fn.doCF(sku,fskus)}});$.fn.compareCB=function(){return this.each(function(){$(this).click(function(){if(this.checked==true){compare.on(this.value)}else{compare.off(this.value)}});if(this.checked==true){compare.on(this.value)}})};$.fn.availBubbles=function(){return this.each(function(){$(this).click(function(){$("#"+this.id+"_bubble").toggle()})})};$.fn.closeBubbles=function(){return this.each(function(){$(this).click(function(){$(this).parent().parent().toggle();return false})})};$.fn.compareItem=function(){return this.each(function(){$(this).click(function(){if(this.innerHTML==" "){}else{var a=this.className.split("_");a=a[1].split(" ");compare.off($("#compare_"+a[0]).val())}})})};var compare={traySize:26,items:new Array(3),on:function(b){var k;for(i=0;i<compare.items.length;i++){if(compare.items[i]==null){compare.items[i]=b;k=i+1;break}}if(k){var a=$("#pThumb_"+b)[0].src;var j=items[b].width;var e=items[b].height;if(!j||!e){j=26;e=26}else{if(j>e){var f=j/this.traySize;j=this.traySize;e=Math.round(e/f)}else{var f=e/this.traySize;e=this.traySize;j=Math.round(j/f)}}var g=Math.round((this.traySize-e)/2);$(".item_"+k).addClass("full");var c=$("#name_"+b+" a").html().split("-");var d=$("#name_"+b).next().children(".model").html();$(".item_"+k).html('<img src="'+a+'" alt="'+c[0]+"- "+d+'" title="'+c[0]+" - "+d+'" width="'+j+'" height="'+e+'" style="padding-top: '+g+'px;" /><input name="compare_'+k+'" id="compare_'+k+'" type="hidden" value="'+b+'" /><span class="remove"> </span>')}else{$("#cb_"+b)[0].checked=false;errorpop.show(error.fullTray)}},off:function(b){var a;for(i=0;i<compare.items.length;i++){if(compare.items[i]==b){compare.items[i]=null;a=i+1;break}}$(".item_"+a).removeClass("full");$(".item_"+a).html(" ");$("input.compareCB").each(function(){if(this.value==b){this.checked=false}});this.resort(a)},resort:function(c){for(i=c-1;i<compare.items.length-1;i++){if(compare.items[i+1]){compare.items[i]=compare.items[i+1];compare.items[i+1]=null;var b=$(".item_"+(i+2)).html();$(".item_"+(i+1)).html(b);$(".item_"+(i+2)).html(" ");$(".item_"+(i+1)).addClass("full");$(".item_"+(i+2)).removeClass("full");var a=$("#compare_"+(i+2))[0];a.id="compare_"+(i+1);a.name="compare_"+(i+1)}}}};$.fn.doCF=function(b,a){jQuery.each(b,function(){if(jQuery.inArray(this.toString(),a)!=-1){$("#"+this+" .puck").parent().append("<img style='float: left;padding-top:5px;' src='http://images.bestbuy.com/BestBuy_US/en_US/images/global/misc/fit_sm_grey.gif' alt='It Fits!' /><div style='padding:8px 0 0 30px;color:#999999;'>This item fits your vehicle.</div>")}else{$("#"+this+" .puck").parent().append("<img style='float: left;margin-top:6px;' src='http://images.bestbuy.com/BestBuy_US/en_US/images/global/misc/no_fit_sm_grey.gif' alt='Does not fit.' /><div style='padding:8px 0 0 30px;color:#999999;'>This item does not fit your vehicle.</div>")}})};$.fn.doMag=function(){$(this).parent().parent().append('<div class="magnoliasash"></div>')};$.fn.doProSeries=function(){$(this).parent().parent().append('<div class="proseriessash"></div>')};$.fn.doPPPop=function(){return this.each(function(){$(this).toggle(function(){$(this).parent().append('<div class="ppbox">'+ppmessage+"</div>");$("div.close-box").closeBox("ppbox")},function(){$(this).parent().find("div.ppbox").remove()})})};$.fn.closeBox=function(a){return $(this).click(function(){$(this).parent().parent().find("div."+a).remove()})};function fnSearchCompare(b){var a="";var m=0;var c="";var d="";var e="";var l="";var j="";var k="";var h="";for(var g=0;g<document.frmSearchCompare.elements.length;g++){if(document.frmSearchCompare.elements[g].type=="checkbox"){if(document.frmSearchCompare.elements[g].checked=="1"){m++;a=a+document.frmSearchCompare.elements[g].value+"*"}}}if(m<2){errorpop.show(error.emptyTray)}else{a=a.substring(0,a.length-1);for(var g=0;g<document.forms.length;g++){if(document.forms[g].name=="frmAddCartBuy"){if(document.frmAddCartBuy.chkcomparebox.checked=="1"){a=a+"*"+document.frmAddCartBuy.chkcomparebox.value}}}e=document.compareForm.pagetype.value;d=document.frmSearchCmpProducts.successUrl.value;if(e!=null&&e=="search"){j=document.frmSearchCompare.breadCrumbs.value;document.compareForm.breadCrumb.value=document.frmSearchCompare.breadCrumbs.value}if(e!=null&&e=="browse"){if(document.frmSearchCompare.dCrumbs.value!="null"){k=document.frmSearchCompare.dCrumbs.value;if(k!=null){document.compareForm.dCrumb.value=document.frmSearchCompare.dCrumbs.value;document.compareForm.dynabreadCrumb.value=document.frmSearchCompare.dynabreadCrumbs.value;document.compareForm.dynabreadCrumb.value=document.frmSearchCompare.dynabreadCrumbs.value}}else{h=document.frmSearchCompare.catId.value}}var f=escape(document.frmSearchResults.qp.value);if(e!=null&&e=="search"){d=d+"&cp="+document.frmSearchResults.cp.value+"&qp="+f}if(e!=null&&e=="browse"){d=d+"&cp="+document.frmSearchResults.cp.value}c="olspage.jsp?id="+b+"&type=page&pageIdentity=searchDriven&useProductString="+true+"&productString="+a+"&unProductString="+frmSearchCompareUnCheckString()+"&catId="+h;document.compareForm.url.value=d;document.compareForm.action=c;document.compareForm.submit()}};