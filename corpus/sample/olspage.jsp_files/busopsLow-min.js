var __busopsLowVersion="v31";var busopsLow={listSKUArray:[],listProductArray:[],isList:false,isPDP:false,isBrowseList:false,isSearchList:false,hasFacets:false,hideTimer:250,forceMAP:["9112569","9300758","9301052"],isCheckmarkPresent:function(a,b){return(this.getCheckmarkLocation(a,b)!==null?true:false);},getCheckmarkLocation:function(m,e){var i=null;var r=false;if(this.isList){var b=document.getElementById(e);if(b!==null){for(var s=0,f=b.childNodes.length;s<f;s++){childNode=b.childNodes[s];if(childNode!==null&&typeof(childNode.className)!="undefined"&&/info-side/i.test(childNode.className)){var k=childNode.getElementsByTagName("ul");if(k!==null){for(var j=0,q=k.length;j<q;j++){var g=k[j];if(g!==null&&/p-v offers/i.test(g.className)){var a=g.childNodes;if(a!==null){for(var n=0,o=a.length;n<o;n++){var d=new RegExp(m,"i");if(d.test(a[n].innerHTML)){i=[];i[0]=s;i[1]=j;i[2]=n;r=true;break;}}}if(r){break;}}}}if(r){break;}}}}}else{if(this.isPDP){var l=document.getElementById("plusblock");if(l!==null){var k=l.getElementsByTagName("ul");if(k!==null){for(var v=0;v<k.length;v++){var h=k[v].getElementsByTagName("li");if(h!==null){for(var t=0;t<h.length;t++){var d=new RegExp(m,"i");if(d.test(h[t].innerHTML)){i=[];i[0]=v;i[1]=t;r=true;break;}}}}}}}}return i;},hideCheckmark:function(a,d){var b=this.getCheckmarkLocation(a,d);if(b!==null){if(this.isList){document.getElementById(d).childNodes[b[0]].getElementsByTagName("ul")[b[1]].childNodes[b[2]].style.display="none";}else{if(this.isPDP){document.getElementById("plusblock").getElementsByTagName("ul")[b[0]].getElementsByTagName("li")[b[1]].style.display="none";}}}},findWindowCenterWithScrollPosition:function(){var a,b;if(!window.innerWidth&&document.documentElement&&document.documentElement.clientWidth!=0){a=document.documentElement.clientWidth/2;b=document.documentElement.clientHeight/2;}else{a=window.innerWidth/2;b=window.innerHeight/2;}a+=(window.pageXOffset||document.documentElement.scrollLeft||0);b+=(window.pageYOffset||document.documentElement.scrollTop||0);return[a,b];},do_eStatic:function(){if(!(/kiosk.*\.bestbuy\.com/i.test(window.location.href))){var f=document.createElement("script");f.type="text/javascript";f.src="https://as00.estara.com/as/InitiateCall2.php?accountid=200106285781";f.defer="defer";document.getElementsByTagName("head")[0].appendChild(f);}var a=document.getElementById("estara");var e=document.getElementById("ftr_estara_btn");var b=document.getElementById("estarafooter");var g=window.location.href;if(/espanol.*\.bestbuy\.com/i.test(g)){var d=document.getElementById("ftr_estara_img");e.href="javascript:webVoicePop('Template=255823');";if(d!==null){d.src=imgServer+"/en_US/images/global/estara/ftr_btn_clicktocall-es.gif";}}else{if(/kiosk.*\.bestbuy\.com/i.test(g)){if(a!==null){a.style.display="none";}if(b!==null){b.style.display="none";}}}},addMessageCode:function(){if(document.getElementById("messageBubble")===null){var b=document.createElement("div");b.style.position="absolute";b.style.display="block";b.style.display="none";b.style.zIndex=10000;b.id="messageBubble";var a='<div class="messagetop">&nbsp;</div>';a+='<div class="messagemid" id="messageBubbleContent">&nbsp;</div>';a+='<div class="messagebottom">&nbsp;</div>';b.innerHTML=a;addOnloadEvent(function(){document.getElementsByTagName("body")[0].appendChild(b);});}},showMessage:function(d,a,f){var e=document.getElementById("messageBubble");if(e!==null){var b=document.getElementById("messageBubbleContent");if(d!=""){b.innerHTML=d;}if(window.pageYOffset){f=(window.pageYOffset>f?window.pageYOffset:f);}else{if(window.scrollTop){f=(window.scrollTop>f?window.scrollTop:f);}}e.style.left=a+"px";e.style.top=f+"px";e.style.display="block";}},hideMessage:function(){var a=document.getElementById("messageBubble");if(a!==null){a.style.display="none";}},findPosition:function(a){var b=curtop=0;if(a.offsetParent){b=a.offsetLeft;curtop=a.offsetTop;while(a=a.offsetParent){b+=a.offsetLeft;curtop+=a.offsetTop;}}return[b,curtop];},template:function(){if(this.isList||this.hasFacets){var b=window.location.search;if(/(cat02001|musicSP|artistSP|albumTitleSP|songSP)/.test(b)){return"MU";}if(/(abcat070|gameToySP|abcat0712)/.test(b)){return"G";}if(/(cat02015|movieSP|titleSP|personSP)/.test(b)){return"MO";}return"U";}else{if(this.isPDP){if(typeof(window.templateName=="string")){var a=window.templateName;if(/PDG/.test(a)){return"G";}if(/PDMO/.test(a)){return"MO";}if(/PDMU/.test(a)){return"MU";}if(/PDS/.test(a)&&typeof(window.skuclass)=="string"&&window.skuclass=="216"){return"G";}}}}},trackLink:function(a){return;},flvPopupTrailer:function(e,d,b){var a=imgServer+"en_US/images/global/flvPlayTrailer/flvPlayTrailer.html?autoStart="+d+"&bbyid="+encodeURIComponent(e)+"&bbyimg="+imgServer+"en_US/images/global/flvPlayer/black.gif&hbx.pn="+b;window.open(a,"flvWindow","toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=500,height=480,addressbar=0");},createSKUArray:function(){if(this.listSKUArray.length==0){var d=document.getElementsByTagName("div");for(var b=0,a=d.length;b<a;b++){if(/^\d+$/.test(d[b].id)){this.listSKUArray.push(d[b].id);}}}},createProductArray:function(){if(this.listProductArray.length==0){var f=$(".info-main > h3").find("a");for(var a=0,b=f.length;a<b;a++){var e=f[a];var d=/&id=\d+/.exec(e);d=String(/\d+/.exec(d));this.listProductArray.push(d);}}},loadScriptAllSKU:function(e){var b="";for(var a=0,d=this.listSKUArray.length;a<d;a++){b=e+busopsLow.listSKUArray[a];window.appendScript(b);this.wait(40);}},loadScriptAllProduct:function(j){var g="";var b=[];var d=false;for(var e=0,h=this.listProductArray.length;e<h;e++){var f=this.listProductArray[e];for(var a=0;a<b.length;a++){if(b[a]==f){d=true;break;}}if(d){d=false;continue;}g=j+busopsLow.listProductArray[e];window.appendScript(g);b.push(busopsLow.listProductArray[e]);this.wait(40);}},wait:function(b){var d=new Date().getTime();var a=d;while(a-d<b){a=new Date().getTime();}},listAddElementBelowRatingByProduct:function(g,b){for(var d=0,a=this.listProductArray.length;d<a;d++){if(this.listProductArray[d]==g){var f=this.listSKUArray[d]+"_"+b.id;if(document.getElementById(f)===null){var e=document.createElement("div");e.id=f;e.innerHTML=b.innerHTML;this.listAddElementBelowRatingBySKU(this.listSKUArray[d],e);}}}},listAddElementBelowRatingBySKU:function(e,b){var f="#"+e+" > .info-main > .rating";var a="#"+e+"_third-party-div";var d=document.getElementById(e+"_third-party-div");if(d===null){var g=document.createElement("div");g.id=e+"_third-party-div";g.style.padding="3px 0px 5px 0px";$(f).after(g);}$(a).append(b);},doGeoTargeting:function(){var a=new Date(sysdt);if(a<=new Date("8/1/2009")){__GEO.replaceWithTargetedHTML("dma","616","b52",'<a href="/site/olspage.jsp?id=pcmcat180000050011&amp;type=category" name="&amp;lid=B52_buyback"><img src="http://images.bestbuy.com/BestBuy_US/en_US/images/abn/2009/global/pcon/buyback/b52_buyback_090426.gif" width="780" height="40" border="0" alt="Buy Back at Best Buy"></a>');}__GEO.replaceWithTargetedHTML("state","AK","b52",'<a href="/site/olspage.jsp?id=pcmcat157300050000&amp;type=category" name="&amp;lid=b52_iph"><img src="'+imgServer+'en_US/images/abn/2008/global/pcon/alaska/b52_bushshipping_080817.gif" width="780" height="40" alt="Alaska bush shipping" border="0" /></a>');__GEO.replaceWithTargetedHTML("country","IQ,KW,AF,DE","b52",'<a href="/site/olspage.jsp?id=pcmcat43300050006&amp;type=category" name="&lid=b52_apofpo_shipping"><img src="'+imgServer+'en_US/images/abn/2009/global/pcon/military/b52_apofpo_090524.gif" height="40" width="780" alt="improved apo_fpo shipping times" border="0" /></a>');},init:function(){var g=window.location.search;this.isPDP=(document.getElementById("productsummary")!==null)?true:false;this.isList=(document.getElementById("listView")!==null)?true:false;this.hasFacets=(document.getElementById("searchnav")!==null)?true:false;busopsLow.doGeoTargeting();busopsLow.addMessageCode();addOnloadEvent(busopsLow.do_eStatic);if(this.isPDP){if(typeof(window.skuid)!==null&&typeof(window.product)!==null){var j=this.template();var n=window.product;var k=window.skuid;if(/MO/.test(j)){$("p:contains('1/1/2049')").each(function(){$(this).css("display","none");});$("p:contains('12/31/2009')").each(function(){$(this).css("display","none");});$("b:contains('Release Date')").each(function(){$(this).css("display","none");});$("#detailband").html($("#detailband").html().replace(/1\/1\/2049/ig,""));$("#detailband").html($("#detailband").html().replace(/12\/31\/2009/ig,""));window.appendScript("http://rosetta.screenplayinc.com/bestbuy/lookup_by_sku?retailer_sku="+k);window.appendScript("http://bestbuy.partner.commonsensemedia.org/bestbuy_remote.php?bbid="+n);}else{if(/G/.test(j)){window.appendScript("http://www.gamespot.com/pages/partners/bestbuy/js.php?pid="+n);window.appendScript("http://bestbuy.partner.commonsensemedia.org/bestbuy_remote.php?bbid="+n);}}if(typeof(skuid)!="undefined"&&typeof("product")!="undefined"){for(var l=0,o=this.forceMAP.length;l<o;l++){if(this.forceMAP[l]==skuid){var b='<div id="seeincart">Our Price:<br/><a href="';b+="javascript:popUp('olspage.jsp?id=pcat17053&type=page&skuId="+skuid+"&productId="+product+"&forceMAP=true','MiniCart','4','0');";b+='">See price in cart >';var d=document.getElementById("saleprice");if(d!==null){d.innerHTML=b;}}}}if(typeof(busopsLow.ICS)!="undefined"){busopsLow.ICS.init();}if(typeof(isOC)=="boolean"&&isOC){var r=document.getElementById("pdp_c2c_module");var p=document.getElementById("bbym_c2c_module");if(r!==null){r.style.display="none";}if(p!==null){p.style.display="none";}}if(typeof(ESRB)=="string"&&typeof(ESRBText)=="string"){doesrb(ESRB,ESRBText);}}busopsLow.OC.init();}else{if(this.isList){this.createSKUArray();this.createProductArray();var j=this.template();if(/MO/.test(j)){this.loadScriptAllSKU("http://rosetta.screenplayinc.com/bestbuy/lookup_by_sku?retailer_sku=");this.loadScriptAllProduct("http://bestbuy.partner.commonsensemedia.org/bestbuy_remote.php?bbid=");}else{if(/G/.test(j)){this.loadScriptAllProduct("http://www.gamespot.com/pages/partners/bestbuy/js.php?pid=");this.loadScriptAllProduct("http://bestbuy.partner.commonsensemedia.org/bestbuy_remote.php?bbid=");}}$("span:contains('Release Date') + strong:contains('1/1/2049')").each(function(){$(this).parent().css("display","none");});$("span:contains('Release Date') + strong:contains('12/31/2009')").each(function(){$(this).parent().css("display","none");});$("span:contains('Release Date') + strong:contains('01/01/2049')").each(function(){$(this).parent().css("display","none");});for(var l=0,o=this.forceMAP.length;l<o;l++){var e=$("#"+this.forceMAP[l]+" > .info-side > .sale, "+"#"+this.forceMAP[l]+" > .info-main > .name");if(e.length==2){var h=/\d+/.exec(e[1].id)[0];e[0].innerHTML="";var s=document.createElement("br");$(e[0]).after(s);var q=document.createElement("a");q.href='javascript:popUp("olspage.jsp?id=pcat17053&type=page&skuId='+this.forceMAP[l]+"&productId="+h+'&forceMAP=true","MiniCart","4","0");';q.innerHTML="See price in cart >";$(e[0]).after(q);}}if(!/MO/.test(j)&&!/MU/.test(j)){if(typeof(busopsLow.LOCO)!="undefined"){busopsLow.LOCO.init();}}busopsLow.OC.init();busopsLow.SWIFT.init();}}if(this.hasFacets){var j=this.template();if(/MU/.test(j)){var f=document.getElementsByTagName("LI");for(var l=0,o=f.length;l<o;l++){if(/Classical Music/ig.test(f[l].innerHTML)){var m='<a href="/site/olspage.jsp?id=pcmcat178500050007&type=category");">Classical Music</a><span class="resultcount"> (65,000+) </span>';f[l].innerHTML=m;}}}}}};busopsLow.SWIFT={bEnableSWIFT:true,sQueryVariable:"swift",bRequireQueryVariable:true,sSWIFTUrl:null,getSWIFTUrl:function(){if(this.sSWIFTUrl!=null){return f;}var i=window.location.search;var f=null;if(i!=null){var h=/[\?&]qp=.*/.exec(i);if(h!=null){h=h[0];var a=h.substring(1).indexOf("&");if(a>0){h=h.substr(4,a-3);}var g=h.indexOf("~~q");var b=h.substring(g+1).indexOf("~~");var d=h.substr(g,b+1);var j=h.replace(d,"");var e=i.replace(h,j);e=e.replace("id=pcat17080","id=pcat17071");f="/site/olspage.jsp"+e;}}return f;},addSWIFTModule:function(){var d="swift";if(document.getElementById(d)===null){var e='SWIFT: <input id="swiftSearch" onkeydown="return busopsLow.SWIFT.processKeyPress(event)" /><input border="0" type="image" alt="" src="http://images.bestbuy.com:80/BestBuy_US/en_US/images/global/hf/bby2/hdr_btn_go.gif" onclick="busopsLow.SWIFT.doSearch()" />';var b=document.createElement("div");var a=document.getElementById("searchlistcontent");b.id="swift";b.className="swiftClass";b.innerHTML=e;a.insertBefore(b,a.firstChild);}},processKeyPress:function(b){var a=(window.event?b.keyCode:b.which);if(a==13){busopsLow.SWIFT.doSearch();}return true;},doSearch:function(){var a=document.getElementById("swiftSearch").value;var b=this.getSWIFTUrl()+"&st="+a;window.location.href=b;},isValidCategory:function(){return/id=pcat17080/.test(window.location.search);},init:function(){if((this.bEnableSWIFT&&this.isValidCategory()&&!this.bRequireQueryVariable)||(this.bRequireQueryVariable&&/swift=yes/.test(window.location.search))){this.addSWIFTModule();}}};busopsLow.LOCO={m_remixURL:"",m_storeURL:"",localStoreArray:[],localReady:false,localCount:0,totalCount:0,localZip:null,localRadius:50,highlightLocal:false,localStores:[],apikey:"gck44yaa87bdfcz4v6jbznge",maxStoreCount:3,useFacet:true,useCheckbox:false,facetCreated:false,removeOnReturn:false,narrowIsH1:false,enableTracking:true,facetSet:false,userInitiated:false,lastTick:0,latency:0,bEnableInstorePickup:false,init:function(){var d=document.getElementsByName("SelectMIPPDropDownList");var b=document.getElementsByName("Listdrop");var a=false;if(d.length>0){d=d[0];if(d.options[d.length-1].text=="See all"){a=true;}}else{if(b.length>0){b=b[0];if(b!==null&&b.value=="See all"){a=true;}}}if(window.getQueryVariable("instorePickup")=="yes"){busopsLow.LOCO.setCookie("bby_instore_pickup","yes",30);}if(busopsLow.LOCO.getCookie("bby_instore_pickup")=="yes"){this.bEnableInstorePickup=true;}if(a){this.getLocalStoreInfo();}},retStoreInfo:function(h){var d=h["totalPages"];var l=h["currentPage"];var b=h["from"];var f=h["to"];var j=Math.abs(f+1-b);this.localCount=parseInt(h["total"]);this.latency=this.getCT()-this.lastTick;if(typeof(h["error"])!="undefined"){var r=h["error"]["message"];if(/geographic coordinates/.test(r)){var n=document.getElementById("lsZipCode");var a=this.localZip;this.showError("Could not locate the zip code '"+a+".' Please try another.");this.localZip=null;if(n!==null){n.select();n.focus();}}return;}if(this.localCount==0){if((this.removeOnReturn||this.userInitiated)){this.showError("There are not any stores within a "+this.localRadius+" mile radius of "+this.localZip+" with any of the displayed products in stock.");}if((this.removeOnReturn||this.userInitiated)&&this.enableTracking){this.track("No Results");}return;}for(var g=0;g<j;g++){var o=h["products"][g]["sku"];this.localStoreArray.push(o);var k=h["products"][g]["stores"].length;var p="";var q="";for(var m=0;m<k;m++){if(m>this.maxStoreCount-1){break;}p+=this.transformName(h["products"][g]["stores"][m]["name"])+"[----]";q+=h["products"][g]["stores"][m]["storeId"]+"[----]";}this.appendStoreList(p,o,q);}if(l<d){var e=this.m_remixURL+"&page="+(parseInt(l)+1);appendScript(e);}else{this.localReady=true;if(this.removeOnReturn){this.userInitiated=true;this.toggleFacet(this.removeOnReturn);this.removeNon(this.removeOnReturn);this.facetSet=this.removeOnReturn;this.removeOnReturn=false;}else{this.toggleFacet(this.facetSet);this.removeNon(this.facetSet);}}},showError:function(a){if(typeof(errorpop)!="undefined"){errorpop.show('<a class="closePop" href="javascript:errorpop.hide()"><span>close</span></a>'+a);}},appendScriptIE:function(b){var a=document.createElement("script");a.charset="ISO-8859-1";a.type="text/javascript";a.src=b;document.getElementsByTagName("head")[0].appendChild(a);},track:function(a,b){if(typeof(trackEvent)!="undefined"){trackEvent.event("event.view",{inno:"LOCO: "+a});}else{if(typeof(b)!="undefined"&&b){return;}addOnloadEvent(function(){busopsLow.LOCO.track(a,true);});}},mapanddirections1:function(f,k,j,i,h,l,d,g){var b=k+"+"+j;b=b.replace(" ","+");var m=i.replace(" ","+");var e=h.replace(" ","+");var a=l.replace(" ","+");javascript:popUp("olspage.jsp?id="+g+"&type=page&allstores=no&mode=fromProfile&storeId="+f+"&storeAddress="+b+"&storeCity="+m+"&storeState="+e+"&storeZip="+a+"&ozipcode="+d,"MapAndDirections","4","0");},getLocalStoreInfo:function(){var lsi=document.getElementById("localStoreInfo");if(lsi===null){eDiv=document.createElement("div");eDiv.id="localStoreInfo";eDiv.style.zIndex=10000;eDiv.style.display="none";eDiv.style.position="absolute";var ie6top="height: 20px; background: url(http://images.bestbuy.com/BestBuy_US/en_US/images/global/ced/images/availBubble-top.gif) bottom right no-repeat;";var ie7top="background:transparent url(http://images.bestbuy.com/BestBuy_US/en_US/images/global/ced/images/availBubble-top.png) no-repeat scroll right top; height:16px;";var ie6mid="padding:3px 15px; min-height: 40px; background: url(http://images.bestbuy.com/BestBuy_US/en_US/images/global/ced/images/availBubble-mid.gif) top right no-repeat;";var ie7mid="background:transparent url(http://images.bestbuy.com/BestBuy_US/en_US/images/global/ced/images/availBubble-mid.png) no-repeat scroll center top; min-height:40px; padding:3px 15px 3px 40px;";var ie6btm="height: 20px; background: url(http://images.bestbuy.com/BestBuy_US/en_US/images/global/ced/images/availBubble-btm.gif) top right no-repeat;";var ie7btm="background:transparent url(http://images.bestbuy.com/BestBuy_US/en_US/images/global/ced/images/availBubble-btm.png) no-repeat scroll right bottom; height:16px;";var IE6=false
/*@cc_on || @_jscript_version < 5.7 @*/
;var top=IE6?ie6top:ie7top;var mid=IE6?ie6mid:ie7mid;var btm=IE6?ie6btm:ie7btm;eDiv.style.width=(IE6?"233px":"265px");eDiv.innerHTML='<div style="'+top+'">&nbsp;</div>';eDiv.innerHTML+='<div id="localStoreInfoWrapper" style="'+mid+'"><a style="background:transparent url(http://images.bestbuy.com/BestBuy_US/en_US/images/global/ced/images/remove-x.gif) repeat scroll 0% 0%; display:block; float:right; height:16px; margin:-2px 3px 0pt 0pt; width:16px" href="javascript:void(0);" onclick="busopsLow.LOCO.hideLocalStoreInfo();"></a><div id="localStoreInfoContent">&nbsp;</div></div>';eDiv.innerHTML+='<div style="'+btm+'" >&nbsp;</div>';document.getElementsByTagName("head")[0].appendChild(eDiv);addOnloadEvent(function(){document.getElementsByTagName("body")[0].appendChild(document.getElementById("localStoreInfo"));});}if(this.checkCookie()){if(this.useCheckbox){if(document.getElementById("lsenable")===null){this.createCheckbox();}}if(this.useFacet){if(!this.facetCreated){this.createFacet();}}if(this.useCheckbox){var el_azipfield=document.getElementById("editLocalStoreOptions");if(el_azipfield!==null){el_azipfield.innerHTML="("+this.localZip+")";}}var skuList=busopsLow.listSKUArray.toString();skuList=skuList.replace(/,\d{16}/g,"");skuList="sku%20in("+skuList+")";this.totalCount=skuList.split(",").length;var url="http://api.remix.bestbuy.com";url+="/v1/products(inStoreAvailability=true&("+skuList+"))+stores(area("+this.localZip+","+this.localRadius+"))?callback=busopsLow.LOCO.retStoreInfo&format=json&apiKey="+this.apikey+"&show=inStoreAvailability,sku,stores.store.name,stores.store.storeId&pageSize=99";this.m_remixURL=url;this.localStoreArray=[];this.lastTick=this.getCT();appendScript(url);}else{if(this.useCheckbox){if(document.getElementById("lsenable")===null){this.createCheckbox();}}if(this.useFacet){if(!this.facetCreated){this.createFacet();}}}},trackKeyPress:function(b){var a=(window.event?b.keyCode:b.which);if(a==13){this.setOptions(true);}if(a==8){return true;}if((a>95&&a<106)||(a>47&&a<58)){return true;}},createFacet:function(){var n=document.getElementById("leftcol");var d=false;var f=document.createElement("ul");f.className="search";f.id="localStoreFacet";var l='<li class="title"><div style="display:block; float:left;"> Check Stock In<br/> Stores Near Me</div>&#160;<a href="javaScript:busopsLow.LOCO.showStoreLocationInfo();" onclick="busopsLow.LOCO.positionLocalStoreInfo2(this);"><img src="'+imgServer+'en_US/images/global/inno/loco/beta.gif" alt="Beta" /></a></li>';l+='<li><br/><input type="text" onkeydown="return busopsLow.LOCO.trackKeyPress(event);" size="5" id="lsZipCode" value="'+(this.localZip!==null?this.localZip:"")+'"/><a onclick="busopsLow.LOCO.setOptions(true);"><img src="http://images.bestbuy.com:80/BestBuy_US/en_US/images/global/hf/bby2/hdr_btn_go.gif" style="position:relative;top:3px;left:3px;"/></a></li>';f.innerHTML=l;var o=false;if(n!==null){var z=n.childNodes;if(z.length>0){for(var u=0,h=z.length;u<h;u++){if(z[u].className=="narrow"){z=z[u].childNodes;o=true;if(z.length>0){for(var s=0,p=z.length;s<p;s++){if(z[s].nodeName=="H1"&&/Narrow/ig.test(z[s].innerHTML)){var e=0;z[s].id="lsOriginalNarrow";for(var v=s;v<p;v++){if(z[v].className=="narrowcontent"){e=v-s;break;}}if(e>0){z[s+e].insertBefore(f,z[s+e].firstChild);this.facetCreated=true;this.narrowIsH1=true;var b=document.createElement("h1");b.id="lsCreatedNarrowH1";b.style.display="none";b.innerHTML="You've Selected: ";var a=document.createElement("h3");a.innerHTML="Narrow Your Results by:";a.id="lsCreatedNarrowH3";a.style.display="none";a.style.display="none";z[s+e].insertBefore(a,z[s+e].firstChild);z[s].parentNode.insertBefore(b,z[s]);}break;}else{if(z[s].nodeName=="DIV"&&z[s].className=="narrowcontent"){z=z[s].childNodes;for(var k=0,r=z.length;k<r;k++){if(z[k].nodeName=="H3"&&/Narrow/.test(z[k].innerHTML)){if(z[k].nextSibling!==null){this.facetCreated=true;z[k].id="lsOriginalNarrow";z[k].parentNode.insertBefore(f,z[k].nextSibling);}else{z[k].appendChild(f);}}}}}if(this.facetCreated){break;}}if(this.facetCreated){break;}}}if(o){break;}}}if(this.facetCreated){var q=document.getElementById("facetselected");var B=document.createElement("ul");B.id="lsULZipCodeText";var g=document.createElement("li");g.id="lsZipCodeText";g.innerHTML="Store Location: "+this.localZip+'<br/>[<a href="javascript:void(0);" onclick="busopsLow.LOCO.setOptions(false);">Remove</a>]';B.appendChild(g);var A=null;if(q===null){q=document.createElement("div");q.id="facetselected";q.style.display="none";q.appendChild(B);if(this.narrowIsH1){A=document.getElementById("lsCreatedNarrowH3");}else{A=document.getElementById("lsOriginalNarrow");var a=document.createElement("h3");a.id="lsCreatedYouveSelectedH3";a.style.display="none";a.innerHTML="You've Selected: ";A.parentNode.insertBefore(a,A);}if(A!==null){A.parentNode.insertBefore(q,A);}}else{B.style.display="none";for(var p=0,y=q.childNodes.length;p<y;p++){if(q.childNodes[p].nodeName=="UL"){q.insertBefore(B,q.childNodes[p]);break;}}}}}},toggleFacet:function(l){var m=document.getElementById("leftcol");var d=document.getElementById("facetselected");var o=document.getElementById("localStoreFacet");var a=document.getElementById("lsZipCodeText");if(l&&a!==null){a.innerHTML="Store Location: "+this.localZip+'<br/>[<a href="javascript:void(0);" onclick="busopsLow.LOCO.setOptions(false);">Remove</a>]';}if(d!==null){var i=document.getElementById("lsOriginalNarrow");if(this.narrowIsH1){var j=document.getElementById("lsCreatedNarrowH1");var d=document.getElementById("facetselected");var g=document.getElementById("lsCreatedNarrowH3");if(i!==null){i.style.display=(l?"none":"block");}if(j!==null){j.style.display=(l?"block":"none");}if(d!==null){d.style.display=(l?"block":"none");}if(o!==null){o.style.display=(l?"none":"block");}if(g!==null){g.style.display=(l?"block":"none");}}else{var b=document.getElementById("lsCreatedYouveSelectedH3");var e=document.getElementById("lsULZipCodeText");var k=document.getElementById("lsCreatedYouveSelected");if(k!==null){d.style.display=(l?"block":"none");}if(e!==null){e.style.display=(l?"block":"none");}if(o!==null){o.style.display=(l?"none":"block");}if(b!==null){var d=document.getElementById("facetselected");b.style.display=(l?"block":"none");if(d!==null){d.style.display=(l?"block":"none");}}}}if(this.userInitiated){var h=document.getElementById("showing");var n=document.getElementById("showing2");if(n==null){h.id="showing2";n=document.getElementById("showing2");n.style.cssFloat="left";n.style.styleFloat="left";n.style.padding="4px 0pt 0pt";h=document.getElementById("showing");}var f="Showing <strong>"+(l?this.localCount:this.totalCount)+"</strong> of <strong>"+this.totalCount+"</strong>";if(h!==null){h.innerHTML=f;}if(n!==null){n.innerHTML=f;}}},getCT:function(){var a=new Date();var b=a.getTime();return b;},setOptions:function(b){this.userInitiated=true;if(typeof(errorpop)!==null){errorpop.hide();}if(this.useFacet){var a=document.getElementById("lsZipCode");if(a!==null){var e=a.value;if(/^\d{5}$/.test(e)){this.facetSet=b;this.setCookie("localzip",e,30);this.removeOnReturn=b;var d=document.getElementsByName("SelectMIPPDropDownList");if(d.length>0){d=d[0];if((d.selectedIndex!=d.length-1)&&d.options[d.length-1].text=="See all"){this.setCookie("loadOnReload","true");if(this.getCookie("loadOnReload")!="true"){this.setCookie("loadOnReload","true");}performNewSearch("nrp",d.options[d.length-1].value);return;}}if((e!=this.localZip)||!this.localReady){this.getLocalStoreInfo();}else{if(e==this.localZip&&this.localReady){this.toggleFacet(b);this.removeNon(b);}}}else{if(typeof(errorpop)!="undefined"){errorpop.show('<a class="closePop" href="javascript:errorpop.hide()"><span>close</span></a>Your zip code must be a maximum of 5 numbers.  Please re-enter your zip code.');}}}}if(this.enableTracking){if(b){this.track("Go");}else{this.track("Remove");}}},getCookie:function(b){var f=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var e=a[d];while(e.charAt(0)==" "){e=e.substring(1,e.length);}if(e.indexOf(f)==0){return e.substring(f.length,e.length);}}return"";},setCookie:function(b,d,a){var e=new Date();e.setDate(e.getDate()+a);document.cookie=b+"="+escape(d)+((a==null)?"":";expires="+e.toGMTString());},checkCookie:function(){var a=this.getCookie("localzip");if(/^\d{5}$/.test(a)){this.localZip=a;if(this.getCookie("loadOnReload")=="true"){this.setCookie("loadOnReload","false");this.removeOnReturn=true;if(this.enableTracking){this.track("Go");}}return true;}return false;},findPos:function(b){var a=curLeft=0;while(b!==null){if(b.offsetParent){curLeft+=b.offsetLeft;a+=b.offsetTop;}b=b.offsetParent;}return curLeft+","+a;},highlight:function(d){d=Boolean(d);for(var b=0,a=this.localStoreArray.length;b<a;b++){document.getElementById(this.localStoreArray[b]).style.border=((d)?"solid 2px #00F":"none");}},removeNon:function(a){if(!this.checkCookie()){var b=document.getElementById("lsenable");if(b!==null){b.checked=false;}return false;}for(var g=0,k=busopsLow.listSKUArray.length;g<k;g++){var j=busopsLow.listSKUArray[g];var f=new RegExp("(^"+j+"$|^"+j+",|,"+j+"$)");var e=this.localStoreArray.toString();var d=0;if(e.indexOf(j)==-1){var b=document.getElementById(j);var h=b.nextSibling;if(h.nodeName=="#text"){h=h.nextSibling;}if(h.nodeName=="HR"){h.style.display=(a)?"none":"block";}b.style.display=(a)?"none":"block";}}},showStoreLocationInfo:function(){var d=document.getElementById("localStoreInfoContent");if(d!==null){var b='<h4 style="font-size:11px; line-height:13px; color:#666; margin:0pt; padding:0pt;">Local Store Search&#160;<img src="'+imgServer+'en_US/images/global/inno/loco/beta.gif" alt="Beta" /></h4>';b+='<p style="color:#666; margin:2px 20px 0px 0px; text-align:justify;">Use this experimental search to find products available at Best Buy stores near you. Enter your zip code and click "go". Your list of products will be the products that are available at the three closest stores within a 50 mile radius of your zip code. Specific store availability is listed below each product. Select in-store pick-up in the cart to purchase the product and have it available at your local store for pickup.</p>';d.innerHTML=b;var a=document.getElementById("localStoreInfo");if(a!==null){a.style.display="block";}}},showProductInventoryDisclaimer:function(){var d=document.getElementById("localStoreInfoContent");if(d!==null){var b='<h4 style="font-size:11px; line-height:13px; color:#666; margin:0pt; padding:0pt;">Local Store Search&#160;<img src="'+imgServer+'en_US/images/global/inno/loco/beta.gif" alt="Beta" /></h4>';b+='<p style="color:#666; margin:2px 20px 0px 0px; text-align:justify;">These results are generated from a nightly snapshot of store inventory data. Please check with the store or order on-line for in-store pickup to ensure product availability. <br/><br/>Powered by <strong>Best Buy Remix</strong>, BestBuy.com\'s open API. Learn more at <a href="http://remix.bestbuy.com/" target="_blank">http://remix.bestbuy.com/</a>, and let us know what you think of this experiment and how it works for you by commenting in our forums at <a href="http://forums.bestbuy.com/bb/board/message?board.id=Blue_Label_Ideas&thread.id=16" target="_blank">http://forums.bestbuy.com/</a>. </p>';d.innerHTML=b;var a=document.getElementById("localStoreInfo");if(a!==null){a.style.display="block";}}},appendStoreList:function(f,n,m){f=f.replace(/\[----\]$/,"");m=m.replace(/\[----\]$/,"");var p=n+"_div-ls";var b=(document.getElementById(p)!==null?document.getElementById(p):document.createElement("div"));var r=document.createTextNode("Available at the following locations within a "+this.localRadius+" mile radius of "+this.localZip+": ");var l=document.createElement("ul");var o=document.createElement("a");o.onclick=this.positionLocalStoreInfo;o.href="javascript:busopsLow.LOCO.showProductInventoryDisclaimer();";o.innerHTML='<img height="12" border="0" width="13" alt="What is this?" src="'+imgServer+'images/global/buttons/help_icon.gif"/>';b.innerHTML="";b.style.margin="10px 0px";b.style.cssFloat="left";b.style.styleFloat="left";b.style.clear="left";b.appendChild(r);b.appendChild(o);f=f.split("[----]");m=m.split("[----]");for(var j=0,k=f.length;j<k;j++){if(f[j]==""){continue;}var e=document.createElement("a");var s=f[j];var g=m[j];var h=document.createTextNode(s);var q=document.createElement("li");q.style.marginRight="20px";q.style.cssFloat="left";q.style.styleFloat="left";q.style.textAlign="left";e.appendChild(h);e.href="javascript:busopsLow.LOCO.getLocalHours('"+g+"', '"+n+"');";e.onclick=this.positionLocalStoreInfo;e.style.background="transparent url(http://images.bestbuy.com/BestBuy_US/en_US/images/global/ced/images/shipping-arrow.gif) no-repeat scroll right 3px";e.style.paddingRight="8px";q.appendChild(e);l.appendChild(q);q=null;h=null;}l.margin="7px 0";l.style.padding="0";l.style.listStyle="none";l.style.textAlign="center";l.id=n+"_ls-us";b.id=p;b.appendChild(l);var d=document.getElementById(n);if(d!==null){for(c=d.childNodes.length-1;c>0;c--){if(d.childNodes[c].nodeName=="DIV"&&d.childNodes[c].className=="clear"){d.insertBefore(b,d.childNodes[c]);break;}}}},getLocalHours:function(b,e){var d="http://api.remix.bestbuy.com/v1/stores(storeId="+b+")+products(sku="+e+")?show=products.sku,address,city,postalCode,phone,hours,region,name,storeId&format=json&apiKey="+this.apikey+"&callback=busopsLow.LOCO.setStoreInfo";this.lastTick=this.getCT();this.appendScriptIE(d);var a=document.getElementById("localStoreInfo");if(a!==null){a.style.display="block";}if(this.enableTracking){this.track("Store");}},setStoreInfo:function(e){this.latency=this.getCT()-this.lastTick;var a=document.getElementById("localStoreInfoContent");var b=e["stores"][0];var d='<h4 style="font-size:11px; line-height:13px; color:#666; margin:0pt; padding:0pt;">'+this.transformName(b["name"])+" (<a href=\"javascript:busopsLow.LOCO.mapanddirections1('"+b["storeId"]+"','"+b["address"]+"','','"+b["city"]+"','"+b["region"]+"','"+b["postalCode"]+"','','cat12091')\">Map</a>)</h4>";d+='<p style="margin:0pt; padding:0pt; color:#666;">'+b["address"]+"<br/>"+b["city"]+", ";d+=b["region"]+" "+b["postalCode"];d+="<br/>"+b["phone"];d+='<br/><br/><p style="margin:0pt; padding:0pt; color:#666;">Item in stock as of close of business yesterday.</p>';if(this.bEnableInstorePickup){d+='<p><a href="javascript:busopsLow.LOCO.doInstorePickup('+b["storeId"]+","+b["products"][0]["sku"]+')">Order for Instore Pickup&#160;&#8250;</a></p>';}d+='<br/><img style="margin-bottom: -4px; margin-right:5px;" src="http://images.bestbuy.com/BestBuy_US/en_US/images/global/features/hours.gif"/><a href="http://www.bestbuy.com/store/'+b["storeId"]+'/" target="_blank">Hours, Directions & Events&#160;&#8250;</a>';d+='<div style="clear:both;">&nbsp;</div>';a.innerHTML=d;},doInstorePickup:function(a,d){var b='<form id="frmStoresSearchForm" name="frmStoresSearchForm" action="/site/olspage.jsp?_DARGS=/site/en_US/checkout/olschkstorefindersearchform.jsp" method="POST">';b+='<input type="hidden" name="'+a+'addtocart" value="'+a+'"/>';b+='<input type="hidden" name="'+a+'addtocart.x" value="'+a+'"/>';b+='<input type="hidden" name="'+a+'addtocart.y" value="'+a+'"/>';b+='<input type="hidden" name="_D:'+a+'addtocart" value="'+a+'"/>';b+='<input type="hidden" name="_DSV:'+a+'addtocart" value="'+a+'"/>';b+='<input type="hidden" name="sourcePageURL" value="olspage.jsp?id=pcat17005&type=page"/>';b+='<input type="hidden" name="tempCatalogRefId" value="'+d+'"/>';b+='<input type="hidden" name="'+d+'" value="1"/>';b+='<input type="hidden" name="listingType" value=""/>';b+='<input type="hidden" name="/bestbuy/digiterra/commerce/order/formhandler/CartQuickStoresFormHandler.sessionExpiryURL" value="http://www.bestbuy.com/site/olspage.jsp?id=cat14001&type=page&redirectAfterSessCatId=pcat17005&redirectAfterSessCatType=page"/>';b+='<input type="hidden" name="/bestbuy/digiterra/commerce/order/formhandler/CartQuickStoresFormHandler.cancelURL" value="olspage.jsp?id=pcat17005&type=page"/>';b+='<input type="hidden" name="/bestbuy/digiterra/commerce/order/formhandler/CartQuickStoresFormHandler.refreshURL" value="olspage.jsp?id=pcat17006&type=page&skuId='+d+'"/>';b+='<input type="hidden" name="/bestbuy/digiterra/commerce/order/formhandler/CartQuickStoresFormHandler.successURL" value="olspage.jsp?id=pcat17005&type=page"/>';b+='<input type="hidden" name="/atg/commerce/order/ShoppingCartModifier.addItemToOrderSuccessURL" value="olspage.jsp?id=pcat17005&type=page"/>';b+='<input type="hidden" name="/atg/commerce/order/ShoppingCartModifier.addItemToOrderErrorURL" value="olspage.jsp?id=pcat17005&type=page"/>';b+='<input type="hidden" name="_D:/bestbuy/digiterra/commerce/order/formhandler/CartQuickStoresFormHandler.sessionExpiryURL" value="http://www.bestbuy.com/site/olspage.jsp?id=cat14001&type=page&redirectAfterSessCatId=pcat17005&redirectAfterSessCatType=page"/>';b+='<input type="hidden" name="_D:/bestbuy/digiterra/commerce/order/formhandler/CartQuickStoresFormHandler.cancelURL" value="olspage.jsp?id=pcat17005&type=page"/>';b+='<input type="hidden" name="_D:/bestbuy/digiterra/commerce/order/formhandler/CartQuickStoresFormHandler.refreshURL" value="olspage.jsp?id=pcat17006&type=page&skuId='+d+'"/>';b+='<input type="hidden" name="_D:/bestbuy/digiterra/commerce/order/formhandler/CartQuickStoresFormHandler.successURL" value="olspage.jsp?id=pcat17005&type=page"/>';b+='<input type="hidden" name="_D:/atg/commerce/order/ShoppingCartModifier.addItemToOrderSuccessURL" value="olspage.jsp?id=pcat17005&type=page"/>';b+='<input type="hidden" name="_D:/atg/commerce/order/ShoppingCartModifier.addItemToOrderErrorURL" value="olspage.jsp?id=pcat17005&type=page"/>';b+='<input type="hidden" name="productId" value=""/>';b+='<input type="hidden" name="_DARGS" value="/site/en_US/checkout/olschkstorefindersearchform.jsp"/>';b+="</form>";document.getElementById("rightcol").innerHTML+=b;document.getElementById("frmStoresSearchForm").submit();},hideLocalStoreInfo:function(){var a=document.getElementById("localStoreInfo");if(a!==null){a.style.display="none";}},transformName:function(a){a=a.replace(/\s+heig\s+/ig," Heights ");a=a.replace(/\s+minneapolis$/ig," MN");return a;},transformDate:function(j){var g=j.split(",");var b="";var f="";var h='<div style="margin:0pt; padding:0pt; float:left; width:8.5em; color:#666;">{days}</div><div style="color:#666; float:left; clear:right; display:block; width:9em;">{hours}</div>';for(var e=0,d=g.length;e<d;e++){var a=g[e].indexOf("pm");if(a>-1){f=h.replace(/{days}/,g[e].substr(a+3));f=f.replace(/{hours}/,g[e].substr(0,a+2));b+=f;f="";}}return b;},positionLocalStoreInfo:function(){busopsLow.LOCO.hideLocalStoreInfo();var a=document.getElementById("localStoreInfo");if(a!==null){var d=busopsLow.LOCO.findPos(this);a.style.position="absolute";a.style.left=(parseInt(d.split(",")[0])+this.offsetWidth-5)+"px";a.style.top=(parseInt(d.split(",")[1])-29)+"px";var b=document.getElementById("localStoreInfoContent");if(b!==null){b.innerHTML='<div style="display:block; margin:0 auto; text-align:center;"><img src="'+imgServer+"en_US/images/global/inno/loco/ajaxload.gif"+'" /></div>';}}},positionLocalStoreInfo2:function(d){busopsLow.LOCO.hideLocalStoreInfo();var a=document.getElementById("localStoreInfo");if(a!==null){var e=busopsLow.LOCO.findPos(d);a.style.position="absolute";a.style.left=(parseInt(e.split(",")[0])+d.offsetWidth-5)+"px";a.style.top=(parseInt(e.split(",")[1])-29)+"px";var b=document.getElementById("localStoreInfoContent");if(b!==null){b.innerHTML='<div style="display:block; margin:0 auto; text-align:center;"><img src="'+imgServer+"en_US/images/global/inno/loco/ajaxload.gif"+'" /></div>';}}}};busopsLow.ICS={enableICS:true,enableTracking:true,cartSKUs:[],cartIcsCsid:[],accIcsCsid:[],relIcsCsid:[],relatedIcsCsid:[],isPreview:false,inProd:true,icsRelatedUrl:"",accContext:"Cross%20Sells",relContext:"Related%20Products",isABTest:false,abCatList:["abcat0403000","abcat0403001","abcat0403006","abcat0403002","abcat0403004","abcat0403005","abcat0401000","abcat0401005","pcmcat146100050018","abcat0401001","abcat0401002","abcat0401003","abcat0401004","pcmcat180000050013","pcmcat180400050000"],prodAB:true,previewAB:true,accResponse:null,isABCat:function(){var b=false;if(typeof(parentCat)!="undefined"){for(var a=0,d=this.abCatList.length;a<d;a++){if(this.abCatList[a]==parentCat){b=true;break;}}}return b;},init:function(){if(!this.enableICS){return;}if(/preview.bestbuy.com/.test(window.location.href)){this.isPreview=true;}var b=Math.floor(Math.random()*100000000);var d=this.isABCat();if((this.isPreview&&this.previewAB&&d)||(this.prodAB&&d)){var a=window.readCookie("icscontext");this.isABTest=true;if(a==null){a="";}if(/cnettest=bb/.test(window.location.search)){a="bb";}if(/cnettest=cnet/.test(window.location.search)){a="cnet";}if(/bb/.test(a)){this.accContext="BB%20Accessories";addOnloadEvent(function(){busopsLow.ICS.trackEvent("ICSContext","BB");});}else{if(/cnet/.test(a)){this.accContext="All%20Buying%20Behavior";addOnloadEvent(function(){busopsLow.ICS.trackEvent("ICSContext","CNET");});}else{if(Math.floor(Math.random()*2)==0){this.accContext="BB%20Accessories";window.setCookie("icscontext","bb",90);addOnloadEvent(function(){busopsLow.ICS.trackEvent("ICSContext","BB");});}else{this.accContext="All%20Buying%20Behavior";window.setCookie("icscontext","cnet",90);addOnloadEvent(function(){busopsLow.ICS.trackEvent("ICSContext","CNET");});}}}}window.appendScript("http://xs.ics0.com/cs.js?ts=1154023126&sellerId=39&contextid="+this.accContext+"&categoryId="+parentCat+"&productId="+skuId+"&cache="+b);window.appendScript("http://xs.ics0.com/cs.js?ts=1154023126&sellerId=39&contextid="+this.relContext+"&categoryId="+parentCat+"&productId="+skuId);},trackEvent:function(a,b){return;},trackLink:function(a,b){var d=(typeof(b)!="undefined"?"|"+b:"");if(!this.enableTracking){alert(a+d);return;}},isValidItem:function(e){var b=["ModelNumber","RegularPrice","SalePrice","BuyUrl","DollarSavings","IcsCsid","ProductImage","ProductName","MapFlag","Sku","ProductID"];var f=true;for(var a=0,d=b.length;a<d;a++){if((!(b[a] in e))||((b[a] in e)&&typeof(e[b[a]])=="string"&&e[b[a]]["$"]=="")){f=false;break;}}return f;},itemCheck:function(e){var d=e.value.split(",");var g=e.name.substring(9);var a=-1;for(var b=0,f=this.cartSKUs.length;b<f;b++){if(d[0]==this.cartSKUs[b]){a=b;break;}}if(e.checked){if(a==-1){this.cartSKUs.push(d[1]);this.cartIcsCsid.push(g);}}else{if(a>-1){this.cartSKUs.splice(a,1);this.cartIcsCsid.splice(a,1);}}if(!this.inProd){alert(this.cartSKUs.toString());alert(this.cartIcsCsid.toString());}},cartAdd:function(){if(this.cartSKUs.length>0){var a="/site/olspage.jsp?id=pcmcat152200050035&type=category&qvsids=";a+=this.cartSKUs.toString().replace(/,/ig," ");if(typeof(window.ci_cnet_accessoriesIcsCsidsAddToCart)!="undefined"){ci_cnet_accessoriesIcsCsidsAddToCart(this.cartIcsCsid);}else{if(this.enableTracking){this.trackEvent("CI_CNET_ADDTOCART_MISSING",skuid);}}if(this.inProd){window.location=a;}else{alert(a);}}else{alert("Please select items to add.");}},processAccessories:function(l){if(document.getElementById("tabbed-accessories")===null){return;}if(this.accResponse===null){this.accResponse=l;}var n=(this.isPreview)?'<p style="color:red;"><strong>ACCESSORIES WILL BE REPLACED WITH ICS CONTENT:</strong></p>':"";var q="<h2>Suggested Accessories</h2>";var h='<div id="requiredaccessories"><h2>Required Accessories</h2>';var b="";var d=false;var t=0;var r=0;if(typeof(l)!="undefined"&&typeof(l["IcsResponse"]!="undefined")&&typeof(l["IcsResponse"]["IcsItem"])!="undefined"){var a=l["IcsResponse"]["IcsItem"];if(typeof(a.length)=="undefined"){a=new Array();a[0]=l["IcsResponse"]["IcsItem"];}for(var p=0,u=a.length;p<u;p++){d=this.isValidItem(a[p]);if(!d){if(this.enableTracking){this.trackEvent("INVALID_ACC",skuid);}continue;}var s=a[p];var e="";if(s["DollarSavings"]["$"]>0){if(s["MapFlag"]["$"]=="true"){e="See price in cart<br/><br/>";}else{e="<div>Reg. Price: &#36;"+s["RegularPrice"]["$"]+"<br/>You Save: &#36;"+parseFloat(s["DollarSavings"]["$"]).toFixed(2)+"<br/><strong>Sale: &#36;"+s["SalePrice"]["$"]+"</strong></div>";}}else{e='<div class="sale"><strong>Our Price: &#36;'+s["RegularPrice"]["$"]+"</strong></div>";}var m=s["ProductID"]["$"];e+='<div class="addtocart"><input type="checkbox" onclick="busopsLow.ICS.itemCheck(this);" name="accessory'+s["IcsCsid"]["$"]+'" value="'+m+","+s["Sku"]["$"]+'"/>';e+="&#160;Add to Cart";e+="</div>";var o=("ReviewAverage" in s)?s["ReviewAverage"]["$"]:0;var g=o;o=this.roundToHalf(o);o=o.toFixed(1)+"";var k=o.split(".");var f="http://images.bestbuy.com:80/BestBuy_US/images/global/misc/ratings_star_"+k[0]+"_"+k[1]+".gif";var j=s["ProductName"]["$"];j=j.replace("&amp;#","&#");s["ProductName"]["$"]=j;this.accIcsCsid.push(s["IcsCsid"]["$"]);if(s["IcsCategory"]["$"]!==null&&/required/i.test(s["IcsCategory"]["$"])){b='<div class="requiredproduct">';r++;}else{b='<div class="suggestedproduct">';}b+='	<div class="prodimage"><img src="'+s["ProductImage"]["$"]+'" /></div>';b+='	<div class="prodlink">';b+='		<a href="'+s["BuyUrl"]["$"]+"&amp;IcsCsid="+s["IcsCsid"]["$"]+"\" onmousedown=\"busopsLow.ICS.trackLink('ICSAccessory','"+skuid+"_"+s["Sku"]["$"]+"');\">"+s["ProductName"]["$"]+"</a><br/>";b+="		<strong>Model: </strong>"+s["ModelNumber"]["$"]+" | <b>SKU: </b>"+s["Sku"]["$"]+"<br/>";b+='		<div class="rating">';b+=((o!=0)?"<strong>Customer Rating:&#160;</strong>":"Not yet rated.&#160;");b+='					<img src="'+f+'" />&nbsp;<strong>'+g+"</strong></div>";b+="	</div>";b+='	<div class="prodpricing">'+e+"</div>";b+='	<div class="clear"></div>';b+="</div>";if(s["IcsCategory"]["$"]!==null&&/required/i.test(s["IcsCategory"]["$"])){h+=b;}else{q+=b;}t++;if(p+1<u){if(!(s["IcsCategory"]["$"]!==null&&/required/i.test(s["IcsCategory"]["$"]))){q+='<div class="pdpsolidhr"><hr/></div>';}}else{if(r>0){h+="</div>";q=h+q;}q+='<div class="addaccessories">';q+='	<a href="javascript:busopsLow.ICS.cartAdd()" onmousedown="busopsLow.ICS.trackLink(\'ICSAddItem\');">';q+='		<img src="http://images.bestbuy.com:80/BestBuy_US/en_US/images/global/buttons/btn_addaccessorytocart_pdp.gif" alt="" border="0" id="addaccessoriestocart" />';q+="	</a>";q+="</div>";q=n+q;}}if(this.isPreview){if(t>0){if(document.getElementById("tabbed-accessories")!==null){document.getElementById("tabbed-accessories").innerHTML+=q;}}}else{if(t>0){if(document.getElementById("tabbed-accessories")!==null){addOnloadEvent(function(){if(typeof(window.ci_cnet_populateAccessoriesIcsCsids)!="undefined"){ci_cnet_populateAccessoriesIcsCsids(busopsLow.ICS.accIcsCsid);if(busopsLow.ICS.enableTracking){busopsLow.ICS.trackEvent("CI_CNET_ACC_PRESENT",skuid);}}else{if(busopsLow.ICS.enableTracking){busopsLow.ICS.trackEvent("CI_CNET_ACC_MISSING",skuid);}}});document.getElementById("tabbed-accessories").innerHTML=q;}}}}busopsLow.TopCoder.init();},processRelated:function(g){var k=(this.isPreview)?"":"display:none;";var o='<style type="text/css">';o+=".pspcontent, .prodaccessorycontent2{font-size:9px;border-bottom:solid 1px #ccc;background:url('http://images.bestbuy.com/BestBuy_US/en_US/images/global/pdp/bluebox-border.gif') top left repeat-y;}.pspcontent p, .prodaccessorycontent2 p{margin:0;padding:5px 10px;}.prodaccessorycontent {"+k+"}";o+="</style>";if(this.isPreview){o+='<p style="color:red;"><strong>RELATED WILL BE REPLACED WITH ICS CONTENT:</strong></p>';}o+='<div class="blueboxframe"><div class="prodaccessorycontent2">';o+='<div class="pt1"><h3>Related Products</h3></div>';var e="";var j=false;var a=0;if(typeof(g)!="undefined"&&typeof(g["IcsResponse"]!="undefined")&&typeof(g["IcsResponse"]["IcsItem"])!="undefined"){var d=g["IcsResponse"]["IcsItem"];if(typeof(d.length)=="undefined"){d=new Array();d[0]=g["IcsResponse"]["IcsItem"];}for(var h=0,m=d.length;h<m;h++){j=this.isValidItem(d[h]);if(!j){if(this.enableTracking){this.trackEvent("INVALID_REL",skuid);}continue;}var n=d[h];var b="";if(n["DollarSavings"]["$"]>0){if(n["MapFlag"]["$"]=="true"){b="See price in cart<br/><br/>";}else{b="Reg. Price: &#36;"+n["RegularPrice"]["$"]+"<br/>You Save: &#36;"+parseFloat(n["DollarSavings"]["$"]).toFixed(2)+"<br/><strong>Sale: &#36;"+n["SalePrice"]["$"]+"</strong><br/><br/>";}}else{b="<strong>Our Price: &#36;"+n["RegularPrice"]["$"]+"</strong><br/><br/>";}var f=n["ProductID"]["$"];var l=n["ProductName"]["$"];l=l.replace("&amp;#","&#");n["ProductName"]["$"]=l;this.relIcsCsid.push(n["IcsCsid"]["$"]);e='<div class="prodaccessory">';e+='	<div class="prodimage"><a href="'+n["BuyUrl"]["$"]+"\" onmousedown=\"busopsLow.ICS.trackLink('ICSRelated', '"+skuid+"_"+n["Sku"]["$"]+'\');"><img border="0" src="'+n["ProductImage"]["$"]+'" /></a></div>';e+='	<div class="prodtext">';e+='		<a href="'+n["BuyUrl"]["$"]+"&amp;IcsCsid="+n["IcsCsid"]["$"]+"\" onmousedown=\"busopsLow.ICS.trackLink('ICSRelated','"+skuid+"_"+n["Sku"]["$"]+"');\">"+n["ProductName"]["$"]+"</a><br/>";e+="	<div>"+b+"</div>";e+="	</div>";e+="</div>";o+=e;a++;if(h+1<m){o+='<div class="pdphr" style="clear:both;"><hr/></div>';}}o+='<div class="clear"></div>';o+="</div></div>";if(a>0){document.getElementById("servicescol").innerHTML+=o;addOnloadEvent(function(){if(typeof(window.ci_cnet_populateRelatedIcsCsids)!="undefined"){ci_cnet_populateRelatedIcsCsids(busopsLow.ICS.relIcsCsid);if(busopsLow.ICS.enableTracking){busopsLow.ICS.trackEvent("CI_CNET_REL_PRESENT",skuid);}}else{if(busopsLow.ICS.enableTracking){busopsLow.ICS.trackEvent("CI_CNET_REL_MISSING",skuid);}}});}}},processError:function(){if(this.enableTracking){this.trackEvent("ICS_ERROR",skuid);}},roundToHalf:function(b){var d=parseFloat(b);var a=(d-parseInt(d,10));a=Math.round(a*10);if(a==5){return(parseInt(d,10)+0.5);}if((a<3)||(a>7)){return Math.round(d);}else{return(parseInt(d,10)+0.5);}}};busopsLow.OC={arrSKUList:typeof(__ocskulist)!="undefined"?__ocskulist:[],bInitRun:false,keys:{sku:"sku",regprice:"regprice",regpricedate:"regpricedate",currentprice:"currentprice",savings:"savings"},displayProfiles:{$:{title:"Original Price",message:"The price Best Buy initially offered this product for sale at on <b>$regpricedate$.</b><br/><br/>Intermediate markdowns may have occurred since the original price.",regpricetitle:"Original Price:",yousavetitle:"You Save:"},sm:{title:"List Price",message:"The full retail price suggested by the item's manufacturer or supplier.  Best Buy makes no warranty that substantial sales have occurred at that price.  Actual retail prices in your area may differ from the List Price.",regpricetitle:"List Price",yousavetitle:"You Save:"}},getDisplayProfile:function(d){var b=this.getOCSku(d);var a=(typeof(b["displayprofile"])=="undefined"?"$":b["displayprofile"]);a=(typeof(this.displayProfiles[a])!="undefined"?this.displayProfiles[a]:this.displayProfiles["$"]);return a;},getCurrentPrice:function(j){if(busopsLow.isList){var g=document.getElementById(j);var n=0;if(g!==null){var b=g.getElementsByTagName("div");for(var e=0,k=b.length;e<k;e++){if(b[e].className=="info-side"){for(var m=0,d=b[e].childNodes.length;m<d;m++){var l=b[e].childNodes[m];if(l!==null&&l.nodeName.toLowerCase()=="h4"&&/price/.test(l.className)){n=/\$\d+[,]?(\d+)?\.\d{2}/.exec(l.innerHTML);if(n.constructor==Array){n=n[0];n=n.substr(1);n=n.replace(",","");}break;}}if(n!=0){break;}}}}}else{if(busopsLow.isPDP){var h=document.getElementById("priceblock");var f="";if(h!==null){for(var k=h.childNodes.length-1;k>-1;k--){var a=h.childNodes[k];if(a!==null&&(/sale/ig.test(a.id))){f=a.innerHTML;f=/\$\d+[,]?\d+\.\d{2}/ig.exec(f);if(f!==null){f=f[0];f=f.replace(/[$,]/ig,"");}if(!isNaN(f)){n=f;}break;}}}}}return n;},getSKUIndex:function(e){var a=-1;if(this.arrSKUList.length>0){for(var b=0,d=this.arrSKUList.length;b<d;b++){if(this.arrSKUList[b][this.keys.sku]==e){a=b;break;}}}else{}return a;},getOCSku:function(g){var a=null;var b=this.getSKUIndex(g);var f,d,e;if(b>-1){a=this.arrSKUList[b];if(typeof(a[this.keys.savings])=="undefined"||(typeof(a[this.keys.savings])!="undefined"&&a[this.keys.savings]<=0)){f=parseFloat(this.getCurrentPrice(g));d=parseFloat(a[this.keys.regprice]);e=d-f;e=e.toFixed(2);a[this.keys.savings]=e;}}return a;},appendSavingsMessage:function(i,k){var h='<div id="outletcenter" style="background:none; margin:4px 0;"><img src="http://images.bestbuy.com/BestBuy_US/en_US/images/global/ced/images/btn_outlet_item.gif" border="0" onmouseover="busopsLow.OC.showAboutMessage(this);" onmouseout="busopsLow.hideMessage();"></div><div class="clear"></div>';if(busopsLow.isList){var f=document.getElementById(i);if(f!==null){var e=f.getElementsByTagName("div");for(var a=0,j=e.length;a<j;a++){if(e[a].className=="info-side"){var b=e[a].childNodes;for(var m=0,l=b.length;m<l;m++){var d=b[m];if(d!==null&&d.nodeName!==null&&d.nodeName.toLowerCase()=="h4"&&/price/.test(d.className)){k.innerHTML+=h;if(m+1==l){d.parentNode.appendChild(k);}else{d.parentNode.insertBefore(k,b[m+1]);}busopsLow.hideCheckmark("outlet center",i);}}}}}}else{if(busopsLow.isPDP){var g=document.getElementById("priceblock");if(g!==null){k.innerHTML=h+k.innerHTML+'<div class="clear"></div>';g.insertBefore(k,g.firstChild);}}}},showSavingsMessage:function(e,h){var g,b,f,d,h,a;h=this.getOCSku(h);g=busopsLow.findPosition(e);b=(parseInt(g[0])+(e.offsetWidth)+10);f=(parseInt(g[1])-35);a=this.getDisplayProfile(h[this.keys.sku]);d="<b>"+a["title"]+"</b><br/>";d+=a["message"];d=d.replace(/\$regpricedate\$/ig,h["regpricedate"]);busopsLow.showMessage(d,b,f);},showAboutMessage:function(b){var g=document.getElementById("pb_oc");var d="<h1>Outlet Center</h1>";d+="This is the place for great savings on a wide range of products. A vast majority of these products are unopened, have never been returned and any manufacturer warranty is still valid. The only exception is our factory refurbished items, which are gently used products that have been restored to like-new, fully warranted performance.";d+="<br/><br/>Remember to check back often, as the products and deals are changing all the time!";var f=busopsLow.findPosition(b);var a,e;a=parseInt(f[0])+(b.offsetWidth)+10;e=parseInt(f[1])-110;busopsLow.showMessage(d,a,e);},addAboutCode:function(){var b=document.createElement("div");b.id="pb_oc";b.style.display="none";var a='<div class="blur"><div class="ppshadow"><div class="ppcontent"><div id="ppcontent2">';a+="<h1>Outlet Center</h1>";a+='<div id="message">This is the place for great savings on a wide range of products. A vast majority of these products are unopened, have never been returned and any manufacturer warranty is still valid. The only exception is our factory refurbished items, which are gently used products that have been restored to like-new, fully warranted performance.<br /><br />Remember to check back often, as the products and deals are changing all the time!</div>';a+='<div id="close"><a onclick="document.getElementById(\'pb_oc\').style.display=\'none\';" href="javascript://Close">Close <img src="'+imgServer+'en_US/images/global/buttons/btn_closebox.jpg" border="0" /></a><br></div>';a+="</div></div></div></div>";b.innerHTML=a;document.getElementsByTagName("body")[0].appendChild(b);},createAppendDiv:function(b,a){},init:function(){if(this.bInitRun){return;}addOnloadEvent(function(){busopsLow.OC.addAboutCode();});if(busopsLow.isPDP&&typeof(window.skuid)!="undefined"){busopsLow.listSKUArray.push(window.skuid);}for(var d=0,h=busopsLow.listSKUArray.length;d<h;d++){var j=busopsLow.listSKUArray[d];var b=this.getOCSku(j);if(b!==null){var k=document.createElement("div");var g=this.getDisplayProfile(j);var f=b[this.keys.regprice];var e=b[this.keys.savings];k.id=j+"_savings";k.className="savingsmessage";var a='<div class="savingsprice">';a+='<a class="regprice" href="javascript:void(0);"  onmouseover="busopsLow.OC.showSavingsMessage(this,\''+j+'\')" onmouseout="busopsLow.hideMessage();">';a+=g["regpricetitle"]+" $"+addCommas(f)+"</a><br/>";if(g["yousavetitle"]!=""){a+=g["yousavetitle"]+" $"+addCommas(e);}a+="</div>";if(!isNaN(e)&&!isNaN(f)&&f>0&&e>0&&!busopsLow.isCheckmarkPresent("on sale",j)){k.innerHTML=a;}else{k.innerHTML="";}this.appendSavingsMessage(j,k);}}this.bInitRun=true;}};busopsLow.ExternalContent={bEnableCommonSenseMedia:true,bEnableGamePro:true,bEnableGameSpot:true,bEnableRhapsody:true,bEnableScreenplay:true,addCommonSenseMedia:function(d,e){if(this.bEnableCommonSenseMedia){var b=document.createElement("div");if(busopsLow.isList){b.id=e+"_csdiv";b.innerHTML="<a href=\"javascript: popUpRawURL('"+d+"','CommonSenseMedia','6','1')\" title=\"Trusted ratings and reviews on age-appropriate gaming.\" name=\"&lid=CommonSenseText\" title=\"C\">Family reviews</a>: Common Sense Media";busopsLow.listAddElementBelowRatingByProduct(e,b);}else{if(busopsLow.isPDP){var a="";a='<div class="pdpinnerhr"></div>';a+="<h2>Review for Parents</h2>";a+="Is this right for your kid?<br/>";a+="<a href=\"javascript: popUpRawURL('"+d+"','CommonSenseMedia','6','1')\" title=\"Trusted ratings and reviews on age-appropriate gaming.\" name=\"&lid=CommonSenseText\" title=\"C\"><strong>Check out this review</strong></a><br/>";a+="from our non-profit partner Common Sense Media.<br/>";a+="<a href=\"javascript: popUpRawURL('"+d+'\',\'CommonSenseMedia\',\'6\',\'1\')" title="Trusted ratings and reviews on age-appropriate gaming." name="&lid=CommonSenseLogo" title="C"><img src="'+imgServer+'/images/products/pdp_icons/pdp_logo_commonsensemedia.gif" border="0" class="dlbutton" /></a>';b=document.createElement("div");b.id="commonsense";b.innerHTML=a;pdpAddExternalContent(b);}}}},addGamePro:function(d){if(this.bEnableGamePro){var b="<a href=\"javascript: popUpRawURL('"+d+"','GameProWindow','6','1')\" title=\"Click here to see screenhots, movie clips and more at GamePro.com\" name=\"&lid=gamepro\">";b+='<img src="'+imgServer+'/images/products/pdp_icons/pdp_logo_gamepro.gif" alt="Click here to see screenhots, movie clips and more at GamePro.com" class="dlbutton" border="0"/></a><br />';b+="&nbsp;&nbsp;<a href=\"javascript: popUpRawURL('"+d+"','GameProWindow','6','1');\" title=\"Click here to see screenshots, movie clips and more at GamePro.com\" name=\"&lid=gameproTextPDP\">Read reviews</a><br /><br />";var a=document.createElement("div");a.id="gamepro";a.innerHTML=b;pdpAddExternalContent(a);}},addGameSpot:function(a,d){if(this.bEnableGameSpot&&/pid=\d+/.test(a)){var b=document.createElement("div");b.id="gamespot";if(busopsLow.isList){b.innerHTML="<a href=\"javascript: popUpRawURL('"+a+"','GameSpotWindow','6','1');\" title=\"Click here to see screenshots, movie clips and more at GameSpot.com\" name=\"&lid=gamespotText\">News, reviews &amp; more</a>: GameSpot";busopsLow.listAddElementBelowRatingByProduct(d,b);}else{if(busopsLow.isPDP){var e="<a href=\"javascript: popUpRawURL('"+a+"','GameSpotWindow','6','1');\" title=\"Click here to see screenhots, movie clips and more at GameSpot.com\" name=\"&lid=gamespot\">";e+='<img src="'+imgServer+'/images/products/pdp_icons/pdp_logo_gamespot.gif" alt="Click here to see screenhots, movie clips and more at GameSpot.com" border="0" class="dlbutton"/></a><br />';e+="&nbsp;&nbsp;<a href=\"javascript: popUpRawURL('"+a+"','GameSpotWindow','6','1');\" title=\"Click here to see screenshots, movie clips and more at GameSpot.com\" name=\"&lid=gamespotTextPDP\">Read reviews</a><br /><br />";b.innerHTML=e;if(document.getElementById("industryReviews")===null){pdpAddIndustryReviews();}pdpAddExternalContent(b);}}}},addRhapsody:function(f,e){if(this.bEnableRhapsody){var d="javascript:RhapsodyPlayer.setTrackingCodes('bby','list','a');RhapsodyPlayer.playAlbum('"+f+"');";var b=createImgLink(d,"","bdms_btn_a_"+e,imgServer+"en_US/images/global/buttons/btn_play_album.gif","Play Album","","2px 0px 0px 0px");var a=document.createElement("div");a.appendChild(b);a.id="playalbum";a.style.padding="2px 0px 0px 0px";busopsLow.listAddElementBelowRatingByProduct(e,a);}},addScreenplay:function(h,f,a){if(this.bEnableScreenplay){var g="http://www.totaleclips.com/Player/Bounce.aspx?eclipid="+h+"&bitrateid="+f+"&vendorid=302&type=.flv";var b="javascript:busopsLow.flvPopupTrailer('"+g+"','0','"+"playTrailer_"+a+"');";var e=createImgLink(b,"","playTrailer_"+a,imgServer+"en_US/images/global/buttons/btn_play_trailer.gif","Play Trailer","","");var d=document.createElement("div");d.id=a+"_playTrailer";d.style.padding="2px 0px 4px 0px";d.appendChild(e);busopsLow.isList?busopsLow.listAddElementBelowRatingBySKU(a,d):document.getElementById("imagepreviewtext").appendChild(d);}}};busopsLow.TopCoder={bEnableLaptopAccFinder:true,bRequireQueryVariable:false,init:function(){if((busopsLow.isPDP&&/(232|109|250|311|664|5075)/.test(scls))&&(this.bEnableLaptopAccFinder&&!this.bRequireQueryVariable)||(this.bRequireQueryVariable&&/laptopAccFinder=yes/.test(window.location.search))&&!/espanol/.test(window.bbyUrl)){this.LaptopAccFinder.init();}}};busopsLow.TopCoder.LaptopAccFinder={NAMESPACE_PREFIX:"busopsLow.TopCoder.LaptopAccFinder.",ICS_BASE:"http://xs.ics0.com/cs.js",REMIX_BASE:"http://api.remix.bestbuy.com/v1/",REMIX_KEY:"gck44yaa87bdfcz4v6jbznge",CHECKOUT_URL:"http://www.bestbuy.com/site/olspage.jsp?id=pcat17005&type=page&pageId=cat00000&pageType=category&_DARGS=/site/en_US/global/nav/olsminicart.jsp_A&_DAV=",MAX_NUM_ITEM:10,MAX_VISIBLE_ITEM:5,CARITEM_WIDTH:174,CARITEM_IMAGE_WIDTH:160,CARITEM_HEIGHT:111,CARITEM_IMAGE_MARGIN:12,CARITEM_TAB:184,MAX_IMAGE_ZOOM:2,SINGLEITEM_IMAGE_MARGIN:5,CAROUSEL_SCROLL_TIME:350,MSG_SEE_CART:"see cart",LTAC:{},finderVersion:null,enableViewTracking:false,track:function(a,b){if(busopsLow.TopCoder.LaptopAccFinder.enableViewTracking){if(typeof(trackEvent)=="undefined"&&b){return;}else{if(typeof(trackEvent)!="undefined"&&b){trackEvent.event("event.view",{inno:a});}else{if(typeof(trackEvent)!="undefined"&&!b){trackEvent.event("event.view",{inno:a});}else{if(typeof(trackEvent)=="undefined"&&(typeof(b)=="undefined"||!b)){addOnloadEvent(function(d){busopsLow.TopCoder.LaptopAccFinder.track(d,true);});}}}}}},setABTestVersion:function(){var a=readCookie("group");if(a==null||!/(a|b|c)/.test(a)){switch(Math.floor(Math.random()*3+1)){case 1:a="a";break;case 2:a="b";break;case 3:a="c";break;}}var b=window.location.search;if(/version=a/.test(b)){a="a";}if(/version=b/.test(b)){a="b";}if(/version=c/.test(b)){a="c";}if(busopsLow.ICS.accResponse===null){a="a";}this.finderVersion=a;switch(this.finderVersion){case"a":track.abTest="20090819-20090826 Laptop Accessory Control";break;case"b":track.abTest="20090819-20090826 Laptop Accessory Version B";this.hideAccessoryTab();break;case"c":track.abTest="20090819-20090826 Laptop Accessory Version C";this.hideAccessoryTab();break;}},init:function(){this.setABTestVersion();if(this.finderVersion=="a"){return;}addOnloadEvent(function(){if(busopsLow.ICS.accResponse!==null){busopsLow.TopCoder.LaptopAccFinder.injectModalDialog();busopsLow.TopCoder.LaptopAccFinder.injectLaunchButton(busopsLow.TopCoder.LaptopAccFinder.finderVersion);}});},hideAccessoryTab:function(){if(busopsLow.ICS.accResponse!==null&&this.finderVersion!="a"){$("#renderedtabs > li > a > span:contains('Accessories')").parent().parent().hide();}},injectLaunchButton:function(a){var d;if(a=="b"){d=document.getElementById("boxcontents");}else{d=document.getElementById("renderedtabs");}var b=document.createElement("div");d.appendChild(b);b.setAttribute("id","accFinderDiv");b.innerHTML='<div><a href="javascript:busopsLow.TopCoder.LaptopAccFinder.launchAccessoriesWindow(skuId)"><img src="http://images.bestbuy.com/BestBuy_US/en_US/images/global/pcontent/laptop_acc/findAccessories_BLUE.gif" alt="Find Accessories"/></a></div>';$("#accFinderDiv").addClass(a=="b"?"findAccessories":"tabFindAccessories");},injectModalDialog:function(){var d=document.getElementsByTagName("body")[0];var a=document.createElement("div");a.setAttribute("id","modalContainer");d.appendChild(a);$("#modalContainer").addClass("hidden");$("#modalContainer").addClass("selected");var b=document.createElement("div");b.setAttribute("id","modalBox");d.appendChild(b);$("#modalBox").addClass("hidden");b.innerHTML='<div id="modalBlockMessage" class="hidden"> <div class="screen"></div> <div class="message"><!-- Dynamic --></div> </div> <div id="modalHeader"> <a class="right" href="#" onclick="busopsLow.TopCoder.LaptopAccFinder.onCloseModal ();"> close window <img src="http://images.bestbuy.com/BestBuy_US/en_US/images/global/pcontent/laptop_acc/modalCloseBox.png" alt="close window" /> </a> <h1 id="modalTitle"> Accessories </h1> </div> <div id="modalBody"> <div id="modalBodyTop"> <div id="modalBodyTopHeader"> <strong>Suggested Accessories</strong> </div> <div id="modalBodyTopItems"> <div id="itemTemplate" class="item hidden"> <div class="topLeft"></div><div class="top"></div><div class="topRight"></div> <div class="left"></div><div class="right"></div> <div class="bottomLeft"></div><div class="bottom"></div><div class="bottomRight"></div> <div class="itemBox"> <div class="image"><!-- Dynamic --></div> <div class="topBox"> <span class="stars"><!-- Dynamic --></span> </div> <div class="name hidden"><!-- Dynamic --></div> <div class="bottomBackground"></div> <div class="bottomBox bee"> <div class="itemPrice"><!-- Dynamic --></div> <div class="addToCartButton"><!-- Dynamic --></div> </div> <div class="itemClickArea"></div> </div> </div> <div class="itemScroll itemScrollLeft"><a href="javascript:busopsLow.TopCoder.LaptopAccFinder.onCarouselScroll(-1)"></a></div> <div id="topItemSlider"><div id="topItemList"><!-- Dynamic --></div></div> <div class="itemScroll itemScrollRight"><a href="javascript:busopsLow.TopCoder.LaptopAccFinder.onCarouselScroll(1)"></a></div> </div> <div class="topLeft"></div><div class="top"></div><div class="topRight"></div> <div class="left"></div><div class="right"></div> <div class="bottomLeft"></div><div class="bottom"></div><div class="bottomRight"></div> </div> <div id="modalBodyBottom"> <div id="modalBodyBottomBox"> <div id="modalBodyBottomTop"> <div class="itemData hidden"> <div class="center"> <div class="largeImage"><!-- Dynamic --></div> <div class="price"><!-- Dynamic --></div> <div class="addToCartButton"><!-- Dynamic --></div> </div> <div class="description"> <div class="descName"><!-- Dynamic --></div> <div class="productCode"><!-- Dynamic --></div> <div class="review"><!-- Dynamic --></div> <div class="viewDetails"><!-- Dynamic --></div> <div class="shippingStyle shipping"><!-- Dynamic --></div> <div class="shippingStyle eta"><!-- Dynamic --></div> </div> </div> <div class="features hidden"><!-- Dynamic --></div> </div> <div id="modalBodyBottomSep"></div> <div id="modalBodyBottomCart"> <input type="button" class="right checkout button" onclick="busopsLow.TopCoder.LaptopAccFinder.onCheckout()"/> </div> </div> <br class="clear" /> <div class="topLeft"></div><div class="top"></div><div class="topRight"></div> <div class="left"></div><div class="right"></div> <div class="bottomLeft"></div><div class="bottom"></div><div class="bottomRight"></div> </div> </div>';},getSkuFromIdx:function(a){return this.LTAC.accData.IcsItem[a].Sku.$;},getIdxFromData:function(a){return this.LTAC.dataIndex[a.sku];},getDataFromIdx:function(a){var b=this.LTAC.accData.IcsItem[a].Sku.$;return(this.LTAC.itemData[b]===undefined)?null:this.LTAC.itemData[b];},maxFitImage:function(e,i,d,b){var a=e.width(),f=e.height();var g=Math.min(b,Math.min(i/a,d/f));var j=Math.floor(a*g+1e-7);f*=j/a;a=j;e.width(a);e.height(f);},resizeAndCenterImage:function(b,f,d,e,a){this.maxFitImage(b,f-e*2,d-e*2,a);b.css("margin-left",(f-b.width())/2+"px");b.css("margin-top",(d-b.height())/2+"px");},renderPriceString:function(b){b=""+Math.floor(b*100+0.5);var a=b.length;if(a==1){return"$0.0"+b;}else{if(a==2){return"$0."+b;}}return"$"+b.substr(0,a-2)+"."+b.substr(a-2,2);},renderHtmlText:function(a){return a.replace(/\&amp;/g,"&").replace(/\n/g,"<br/>");},fixUrl:function(a){return a.replace(/\&amp;/g,"&");},starHtml:function(f,d){var e=(d===0)?'<img src="'+imgServer+'en_US/images/global/pcontent/laptop_acc/modalStarSm.png" alt="star" />\n':'<img src="'+imgServer+'en_US/images/global/pcontent/laptop_acc/modalStarMd.png" alt="star" />';var a="";for(var b=0;b<f;b++){a+=e;}return a;},setBusy:function(a){if(a!==""){$("#modalBox #modalBlockMessage").removeClass("hidden");$("#modalBox #modalBlockMessage .message").html(a);}else{$("#modalBox #modalBlockMessage").addClass("hidden");}},parseUrl:function(e){var b=e.split(/[\?\&]/);var d={};for(var f=1;f<b.length;f++){var a=b[f].match(/^(.*)=(.*)$/);if(a===null){d[b[f]]="";}else{d[a[1]]=a[2];}}d[""]=b[0];return d;},resetAccessoriesWindow:function(){this.LTAC={numItem:0,numItemLoaded:0,itemData:{},dataIndex:{},itemScrollPos:0,accData:null,hoverIdx:-1,addCartFailTimeout:null,cartPopupWindow:null,etaPopupWindow:null};$("#topItemList").empty();$("#modalBodyBottom .itemData").addClass("hidden");$("#modalBodyBottom .features").addClass("hidden");$(".addToCartButton").empty();},closeModal:function(){if((this.LTAC.cartPopupWindow!==null)&&(!this.LTAC.cartPopupWindow.closed)){this.LTAC.cartPopupWindow.close();}if((this.LTAC.etaPopupWindow!==null)&&(!this.LTAC.etaPopupWindow.closed)){this.LTAC.etaPopupWindow.close();}$("#modalContainer").addClass("hidden");$("#modalBox").addClass("hidden");$("select").show();},resizeCenterAndShowCarouselImage:function(a){this.resizeAndCenterImage(a,this.CARITEM_IMAGE_WIDTH,this.CARITEM_HEIGHT,this.CARITEM_IMAGE_MARGIN,this.MAX_IMAGE_ZOOM);a.removeClass("hidden");},resizeCenterAndShowDetailsImage:function(b,d,a){this.resizeAndCenterImage(b,d,a,this.SINGLEITEM_IMAGE_MARGIN,this.MAX_IMAGE_ZOOM);b.removeClass("hidden");},createEmptyCarouselItem:function(a){var d="item"+a,b="#"+d;$("#itemTemplate").clone().attr("id",d).appendTo("#topItemList");$(b).css("left",(a*(this.CARITEM_TAB-this.CARITEM_WIDTH))+"px");},setAddToCartButton:function(e,a,d){var b='<input type="button" class="'+d+' button" '+'onclick="'+this.NAMESPACE_PREFIX+"onAddToCartClick("+a+')"/>';e.html(b);},computePriceString:function(e,g){if((g!="ics")&&(g!="remix")){return"$$$ ERROR $$$";}var d=null,h=null,b=null;if(g=="ics"){var a=e;d=(a.MapFlag.$!="false");h=a.RegularPrice.$;if((a.SalePrice===undefined)||(a.SalePrice.$===undefined)||(a.SalePrice.$<=0)){b=h;}else{b=a.SalePrice.$;}}else{var f=e;d=f.advertisedPriceRestriction;h=f.regularPrice;b=((f.salePrice===undefined)||(f.salePrice<=0))?h:f.salePrice;}if(b>=h){return this.renderPriceString(h);}else{return d?this.MSG_SEE_CART:this.renderPriceString(b);}},displayPrice:function(e,a,d){var b;if(a){b=this.computePriceString(d,"ics");if(b==this.MSG_SEE_CART){$(e).html('<div class="seeCartText">See price in cart</div>');}else{$(e).html(b);}}else{b=this.computePriceString(d,"remix");if(b==this.MSG_SEE_CART){$(e).html('<div class="seeCartText">See price in cart</div>');}else{$(e).html(b);}}},addImageWithCallback:function(f,a,d,e){var b='<img class="hidden" src="'+a+'" '+'onload="'+d+'"'+' alt="'+e+'" />';$(f).html(b);},improveImageUrl:function(b){var a;a=b.match(/^(.*)_(.)\.gif$/);if(a!==null){return a[1]+"_"+a[2]+"b.jpg";}a=b.match(/^(.*)(\d+)s\.jpg$/);if(a!==null){return a[1]+a[2]+".jpg";}return b;},loadCarouselItem:function(b){var d=this.LTAC.accData.IcsItem[b];var i="item"+b,e="#"+i;$(e+" .name").html(this.renderHtmlText(d.ProductName.$));var h=this.improveImageUrl(this.fixUrl(d.ProductImage.$));this.addImageWithCallback(e+" .image",h,this.NAMESPACE_PREFIX+"resizeCenterAndShowCarouselImage($('"+e+" .image IMG'))","item "+b);var f=0;if(typeof d.ReviewAverage!="undefined"&&d.ReviewAverage!="undefined"){f=d.ReviewAverage.$;}var a=Math.floor(f+0.5);if(a>0){$(e+" .stars").html(this.starHtml(a,0));}this.displayPrice(e+" .itemPrice",true,d);this.setAddToCartButton($(e+" .addToCartButton"),b,"addToCartSm");var g='<div onmouseover="'+this.NAMESPACE_PREFIX+"onItemMouseOver("+b+')" onmouseout="'+this.NAMESPACE_PREFIX+"onItemMouseOut("+b+')" onclick="'+this.NAMESPACE_PREFIX+"onItemClick("+b+')"></div>';$(e+" .itemClickArea").html(g);$(e).removeClass("hidden");},getDescription:function(a){if((a.description!==undefined)&&(a.description!==null)){return a.description;}else{if((a.longDescription!==undefined)&&(a.longDescription!==null)){return a.longDescription;}else{if((a.shortDescription!==undefined)&&(a.shortDescription!==null)){return a.shortDescription;}}}return"";},setBottomImagePriceAddToCartButton:function(h,d,f,b,i,g){var k=(d.largeImage!==null)?d.largeImage:d.image;var e=this.NAMESPACE_PREFIX+"resizeCenterAndShowDetailsImage($('"+f+" .largeImage IMG'), "+b+", "+i+")";var j="item";var a='<img class="hidden" src="'+k+'" '+'onload="'+e+'"'+' alt="'+j+'" />';$(f+" .largeImage").html(a);this.addImageWithCallback(f+" .largeImage",k,this.NAMESPACE_PREFIX+"resizeCenterAndShowDetailsImage($('"+f+" .largeImage IMG'), "+b+", "+i+")","item "+h);this.displayPrice(f+" .price",false,d);this.setAddToCartButton($(f+" .addToCartButton"),h,g);},cacheRemixData:function(a){if(this.LTAC.itemData[a.sku]===undefined){this.LTAC.itemData[a.sku]=a;}else{if(this.LTAC.itemData[a.sku]!==a){}}},displaySingleAccessory:function(f){busopsLow.TopCoder.LaptopAccFinder.cacheRemixData(f);var a=busopsLow.TopCoder.LaptopAccFinder.getIdxFromData(f);busopsLow.TopCoder.LaptopAccFinder.setBottomImagePriceAddToCartButton(a,f,"#modalBodyBottom .itemData",240,136,"addToCartMd");$("#modalBodyBottom .description .descName").html(busopsLow.TopCoder.LaptopAccFinder.renderHtmlText(f.name));var e="Model: "+f.modelNumber+" | SKU: "+f.sku;$("#modalBodyBottom .description .productCode").html(e);var d="Customer Reviews: "+f.customerReviewAverage+" out of 5 stars "+busopsLow.TopCoder.LaptopAccFinder.starHtml(Math.floor(f.customerReviewAverage+0.5),1)+"<br />";$("#modalBodyBottom .description .review").html(d);$("#modalBodyBottom .description .viewDetails").html('<a href="javascript:busopsLow.TopCoder.LaptopAccFinder.viewProductDetails('+a+')">View Product Details</a>');$("#modalBodyBottom .description .shipping").html(f.onlineAvailabilityText);$("#modalBodyBottom .description .eta").html('<a href="javascript:busopsLow.TopCoder.LaptopAccFinder.onEta('+a+')">Estimate Arrival Time</a>');var b="";var g=busopsLow.TopCoder.LaptopAccFinder.getDescription(f);if(g!==""){b='<span class="listHeader">Product Features</span><br/>'+busopsLow.TopCoder.LaptopAccFinder.renderHtmlText(g);}$("#modalBodyBottom .features").html(b);},loadRemix:function(d,a){var b=this.REMIX_BASE+d+"?apiKey="+this.REMIX_KEY;$.ajax({dataType:"jsonp",data:"",jsonp:"callback",url:b,cache:true,success:a});},callFunctionWithRemixData:function(b,a){var e=this.getDataFromIdx(a);if(e===null){var d="products/"+this.getSkuFromIdx(a)+".json";this.loadRemix(d,b);}else{b(e);}},displayRecommendedAccessories:function(){var b=this.LTAC.accData.IcsItem;this.LTAC.numItem=Math.min(b.length,this.MAX_NUM_ITEM);for(var a=0;a<this.LTAC.numItem;a++){this.LTAC.dataIndex[b[a].Sku.$]=a;this.createEmptyCarouselItem(a);this.loadCarouselItem(a);}this.setBusy("");},setModalBodyBottomDisplay:function(a){$("#modalBodyBottom .itemData").toggleClass("hidden",a!="detail");$("#modalBodyBottom .features").toggleClass("hidden",a!="detail");},onIcsLoad:function(a){this.LTAC.accData=a.IcsResponse;this.displayRecommendedAccessories();this.setModalBodyBottomDisplay("detail");this.callFunctionWithRemixData(this.displaySingleAccessory,0);},launchAccessoriesWindow:function(b){if(busopsLow.TopCoder.LaptopAccFinder.finderVersion=="b"){busopsLow.TopCoder.LaptopAccFinder.track("20090819-20090826 Laptop Accessory Version B View");}else{if(busopsLow.TopCoder.LaptopAccFinder.finderVersion=="c"){busopsLow.TopCoder.LaptopAccFinder.track("20090819-20090826 Laptop Accessory Version C View");}}if(busopsLow.ICS.accResponse!==null){$("select").hide();$("#modalContainer").html='<img src="'+imgServer+'images/global/misc/spacer.gif" alt="" border="0" height="'+window.innerHeight+'" width="'+window.innerHeight+'">';if($.browser.msie&&$.browser.version=="6.0"){var a=document.getElementById("modalBox");a.style.top=(300+(window.pageYOffset||document.documentElement.scrollTop||0))+"px";}$("#modalContainer").removeClass("hidden");$("#modalBox").removeClass("hidden");this.resetAccessoriesWindow();this.setBusy("Loading...");this.onIcsLoad(busopsLow.ICS.accResponse);}},updateCarouselItem:function(a,b){if(a>=0){var d="#item"+a;$(d+" .name").toggleClass("hidden",b!="name");$(d+" .image").toggleClass("selected",b!="image");}},ltacOpenPopup:function(e,d){var b='<div style="text-align:center"><img width="100" height="100" alt="loading" src="http://images.bestbuy.com/BestBuy_US/en_US/images/global/inno/loco/ajaxload.gif"/></div>';var i=busopsLow.findWindowCenterWithScrollPosition();var a=i[0]-(233/2);var h=i[1]-100;busopsLow.showMessage(b,a,h);var g=e.replace("http://www.bestbuy.com","");var f=document.getElementById("cartPopupIFrame");if(f==null){f=document.createElement("iframe");f.setAttribute("id","cartPopupIFrame");f.style.top=busopsLow.findWindowCenterWithScrollPosition()[1]+"px";document.getElementsByTagName("body")[0].appendChild(f);$("#cartPopupIFrame").bind("load",function(j){busopsLow.TopCoder.LaptopAccFinder.onAddToCartLoad();});}$("#cartPopupIFrame").attr("src",g);return null;},addCart:function(a){busopsLow.TopCoder.LaptopAccFinder.cacheRemixData(a);busopsLow.TopCoder.LaptopAccFinder.LTAC.cartPopupWindow=busopsLow.TopCoder.LaptopAccFinder.ltacOpenPopup(a.addToCartUrl,"LTACCart");},viewProductDetails:function(a){var b=this.getDataFromIdx(a);this.closeModal();window.location=b.url;},onCarouselScroll:function(e){var a=Math.max(0,this.LTAC.numItem-this.MAX_VISIBLE_ITEM);var d=this.LTAC.itemScrollPos;var b=Math.min(a,Math.max(0,d+e));if(b!=d){this.LTAC.itemScrollPos=b;$("#topItemList").animate({"left":(b*-this.CARITEM_TAB)},this.CAROUSEL_SCROLL_TIME,"swing");}},onItemMouseOver:function(a){this.updateCarouselItem(this.LTAC.hoverIdx,"image");this.LTAC.hoverIdx=a;this.updateCarouselItem(this.LTAC.hoverIdx,"name");},onItemMouseOut:function(a){this.updateCarouselItem(this.LTAC.hoverIdx,"image");this.LTAC.hoverIdx=a;},onItemClick:function(a){this.setModalBodyBottomDisplay("detail");this.callFunctionWithRemixData(this.displaySingleAccessory,a);},onAddToCartClick:function(a){this.callFunctionWithRemixData(this.addCart,a);},onAddToCartLoad:function(){var b="<h1>Item Added To Cart!</h1>";b+="The item you selected was added to your cart. Select an action below:";b+='<div style="float: left; width:85px; margin-top:7px;"><a class="ltacAddToCartLink" onclick="busopsLow.hideMessage();" href="javascript:void(0);">Close</a></div><div style="float: right; margin-top:7px;"><a class="ltacAddToCartLink" href="/site/olspage.jsp?id=pcat17005&type=page">View Cart</a></div><div style="clear: both;"/></div>';var e=busopsLow.findWindowCenterWithScrollPosition();var a=e[0]-(233/2);var d=e[1]-100;busopsLow.showMessage(b,a,d);},onEta:function(a){var b=this.getDataFromIdx(a);var d="http://www.bestbuy.com/site/olspage.jsp?id=cat13503&type=page&skuId="+b.sku;this.LTAC.etaPopupWindow=this.ltacOpenPopup(d,"ShippingDetails");},onCloseModal:function(){this.closeModal();},onCheckout:function(){this.closeModal();window.location=this.CHECKOUT_URL;}};busopsLow.init();function doesrb(e,g){if(typeof ESRB!="undefined"&&ESRB!="undefined"){var d=imgServer+"en_US/images/musicmoviegame/videogames/richmedia/"+"esrb_pdp_"+e+"_42x59.gif";var f='<a href="javascript:openContextSensitiveLink(\'1043363606627\');" title="ESRB Ratings" name="&lid=ESRB">';var b="</a>";strESRB=f+'<img src="'+d+'" border="0" style="padding:0px 5px 5px 0px;" align="left" />'+b;strESRB+=f+"<b>"+ESRBText+"</a></b><br>"+b;strESRB+=ESRBAtr+"";var a=document.createElement("div");a.id="esrb";a.innerHTML=strESRB;document.getElementById("esrbcontent").appendChild(a);}}function doGamePro001(a){busopsLow.ExternalContent.addGamePro(a);}function createImgLink(d,i,b,a,f,g,j){var e=document.createElement("a");e.href=d;e.title=i;e.name=b;e.onmousedown=function(){busopsLow.trackLink(b);};var h=document.createElement("img");h.src=a;h.alt=f;h.align=g;h.style.padding=j;e.appendChild(h);return e;}function doReal(b,a){busopsLow.ExternalContent.addRhapsody(b,a);}function doPlayTrailer(d,b,a){busopsLow.ExternalContent.addScreenplay(d,b,a);}function docs(a,b){busopsLow.ExternalContent.addCommonSenseMedia(a,b);}function doGameSpot001(a,b){busopsLow.ExternalContent.addGameSpot(a,b);}function pdpAddExternalContent(a){if(typeof(a)=="object"&&document.getElementById("external-partners")!==null){document.getElementById("external-partners").appendChild(a);}}function pdpAddIndustryReviews(){var b='<div class="pdpinnerhr"></div>';b+='<div class="Body-Headline" style="display:block;">Industry Reviews</div>';b+="See screen shots, movie clips, reviews and more.";var a=document.createElement("div");a.id="industryReviews";a.innerHTML=b;pdpAddExternalContent(a);}function appendScript(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);document.getElementsByTagName("head")[0].appendChild(b);}function showHide(a,b){document.getElementById(a).style.display=b;}if(typeof(catid)=="string"&&/pcat17071/.test(catid)&&document.getElementById("cat")===null){if((typeof(templateName)!="undefined")&&/SRCM/.test(templateName)){templateName="SRCL";}}